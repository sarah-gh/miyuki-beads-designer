import{_ as nt,r as h,G as X,m as st,w as be,n as at,U as it,c as C,a as o,b as V,z as Y,F as ee,u as te,q as D,t as j,v as z,x as W,V as ye,o as k,A as xe}from"./index-Bz-xWgVK.js";const ct={class:"peyote-editor-container"},rt={class:"grid-container"},ut={class:"image-section"},dt={class:"upload-section grid grid-cols-2 gap-2"},vt={class:"upload-label"},ft={class:"upload-label"},mt={key:0,class:"image-preview"},gt=["src"],pt={class:"main-content"},ht={class:"p-4"},bt={key:0,class:"flex items-start",style:{gap:"0px"}},yt=["onMousedown","onMouseenter"],xt={key:1,class:"flex items-center justify-center h-full text-gray-500"},Ct={class:"controls-panel"},kt={class:"controls-content"},_t={class:"dimensions-section"},wt={class:"dimension-inputs"},$t={class:"dimension-label"},St={class:"dimension-text"},It={class:"dimension-label"},Mt={class:"dimension-text"},Rt={class:"dimension-label"},Ot={class:"dimension-text"},At={class:"dimension-label"},Et={class:"dimension-text"},Gt={class:"color-section"},Lt={class:"selection-mode-indicator"},Pt={class:"mode-text"},Tt={class:"color-picker-container"},Nt={class:"color-value"},Ut={class:"mode-switch-buttons"},Vt=["disabled"],Dt={class:"recent-colors-header mt-3!"},jt={class:"recent-colors-grid"},zt=["title","onClick"],Wt=["onClick"],Ft={class:"image-section"},Bt={class:"image-upload-container"},Jt={class:"image-upload-label"},Ht={key:0,class:"selected-image-preview"},Xt=["src"],Yt={key:1,class:"recent-images-header mt-3!"},qt={key:2,class:"recent-images-grid"},Qt=["onClick"],Kt=["src"],Zt=["onClick"],el={class:"tools-section"},tl={class:"tools-grid"},ll=["disabled"],ol=["disabled"],nl=["disabled"],sl={class:"background-color-section !mt-4"},al={class:"background-color-controls"},il={class:"export-section"},cl={class:"grid grid-cols-2 gap-2"},rl={__name:"PeyoteGridEditor",emits:["update-grid"],setup(ul,{emit:Ce}){const ke=Ce,y=h(null),E=h([]),L=h("color"),v=h(12),d=h(50),_=h(15),w=h(17),le=[{key:"DB-1510",hex:"#efe9df"},{key:"DB-1503",hex:"#efbfc7"},{key:"DB-0914",hex:"#d92e5b"},{key:"DB-1832",hex:"#d39c2a"}],I=h(le[2].hex),g=h("#ffffff"),_e=X(()=>Array.from({length:v.value},(t,e)=>e)),we=X(()=>Array.from({length:d.value},(t,e)=>e)),s=st([]);function $e(){const t=Array.from({length:d.value},()=>Array.from({length:v.value},()=>g.value));s.splice(0,s.length,...t),B.value=!0,console.info("Grid initialized:",{rows:d.value,cols:v.value,gridLength:s.length}),R.value=[JSON.parse(JSON.stringify(s))],O.value=0}const Se=X(()=>d.value*w.value+w.value),Ie=X(()=>v.value*_.value+_.value),Me=X(()=>{var e,l;const t=B.value&&s.length===d.value&&s.length>0&&((e=s[0])==null?void 0:e.length)===v.value;return console.info("Grid ready check:",{gridInitialized:B.value,gridLength:s.length,rows:d.value,cols:v.value,firstRowLength:(l=s[0])==null?void 0:l.length,ready:t}),t}),N=h("paint"),$=h([]),M=h(null),F=h(!1),G=h([]),oe=h(!1),Re=h(!1),q=h(null),B=h(!1),R=h([]),O=h(-1),J=h(!1),ne=h(!1);function ce(){if(J.value)return;const t=JSON.parse(JSON.stringify(s));O.value<R.value.length-1&&(R.value=R.value.slice(0,O.value+1)),R.value.push(t),O.value=R.value.length-1,R.value.length>10&&(R.value.shift(),O.value--),console.info("Saved to history:",{historyLength:R.value.length,historyIndex:O.value})}function P(){ne.value=!0}function T(){ne.value&&(ce(),ne.value=!1)}be([d,v],([t,e],[l,n])=>{if(!B.value){console.info("Grid not initialized yet, skipping resize");return}const c=Math.max(1,Math.min(200,t||1)),a=Math.max(1,Math.min(200,e||1));c!==t&&(d.value=c),a!==e&&(v.value=a),(c!==l||a!==n)&&(console.info("Dimensions changed:",{oldRows:l,oldCols:n,newRows:c,newCols:a}),re(c,a))}),be(I,(t,e)=>{t&&t!==e&&t!==g.value&&Q(t)});function re(t,e){var a;const l=d.value,n=v.value;console.info("Resizing grid:",{oldRows:l,oldCols:n,newRows:t,newCols:e}),P();const c=Array.from({length:t},()=>Array.from({length:e},()=>g.value));if(s.length>0&&s[0]!==void 0)for(let i=0;i<Math.min(l,t);i++)for(let r=0;r<Math.min(n,e);r++)s[i]&&s[i][r]!==void 0&&(c[i][r]=s[i][r]);s.splice(0,s.length,...c),B.value=!0,console.info("Grid resized successfully. New grid dimensions:",{rows:t,cols:e,actualGridLength:s.length,actualFirstRowLength:(a=s[0])==null?void 0:a.length}),T()}function Q(t){if(t===g.value)return;const e=G.value.indexOf(t);e>-1&&G.value.splice(e,1),G.value.unshift(t),G.value.length>20&&(G.value=G.value.slice(0,20))}function Oe(t){const e=G.value.indexOf(t);e>-1&&G.value.splice(e,1)}function Ae(){G.value=[]}function K(t){const e=E.value.indexOf(t);e>-1&&E.value.splice(e,1),E.value.unshift(t),E.value.length>10&&(E.value=E.value.slice(0,10))}function Ee(t){const e=E.value.indexOf(t);e>-1&&E.value.splice(e,1)}function Ge(){E.value=[]}function Le(){y.value=null,L.value="color"}function ue(){L.value="color"}function se(){y.value&&(L.value="image")}function ae(t){N.value=t,U(),fe()}function Pe(t,e){if(F.value){We(t,e);return}switch(oe.value=!0,q.value=`${t},${e}`,N.value){case"paint":P(),Ne(t,e);break;case"fill":P(),Ve(t,e),T();break;case"select":ve(t,e);break}}function Te(t,e){if(!oe.value)return;const l=`${t},${e}`;if(l!==q.value)switch(q.value=l,N.value){case"paint":Ue(t,e);break;case"select":ve(t,e);break}}function de(){T(),oe.value=!1,Re.value=!1,q.value=null}function Ne(t,e){if(s[t]&&s[t][e]!==void 0){const l=s[t][e],n=L.value==="image"?y.value:I.value;s[t][e]=l===n?g.value:n,s[t][e]===I.value?Q(I.value):s[t][e]===y.value&&K(y.value)}}function Ue(t,e){if(s[t]&&s[t][e]!==void 0){const l=L.value==="image"?y.value:I.value;s[t][e]=l,l===I.value?Q(I.value):l===y.value&&K(y.value)}}function Ve(t,e){if(!s[t]||s[t][e]===void 0)return;const l=s[t][e],n=L.value==="image"?y.value:I.value;if(l===n)return;const c=new Set,a=[[t,e]];for(;a.length>0;){const[i,r]=a.pop(),m=`${i},${r}`;c.has(m)||i<0||i>=d.value||r<0||r>=v.value||!s[i]||s[i][r]!==l||(c.add(m),s[i][r]=n,a.push([i+1,r],[i-1,r],[i,r+1],[i,r-1]))}n===I.value?Q(n):n===y.value&&K(n)}function ve(t,e){const l=`${t},${e}`,n=$.value.indexOf(l);n>-1?$.value.splice(n,1):$.value.push(l)}function U(){$.value=[]}function De(){if($.value.length===0){console.warn("No cells selected for copying");return}const t=$.value.map(e=>{var c;const[l,n]=e.split(",").map(Number);return{r:l,c:n,color:((c=s[l])==null?void 0:c[n])||g.value}});M.value=t,console.info(`Copied ${t.length} cells to clipboard`),U(),ie()}function je(){if($.value.length===0){console.warn("No cells selected for cutting");return}P();const t=$.value.map(e=>{var c;const[l,n]=e.split(",").map(Number);return{r:l,c:n,color:((c=s[l])==null?void 0:c[n])||g.value}});M.value=t,console.info(`Cut ${t.length} cells to clipboard`),$.value.forEach(e=>{const[l,n]=e.split(",").map(Number);s[l]&&s[l][n]!==void 0&&(s[l][n]=g.value)}),U(),ie(),T()}function ze(){if(!M.value){console.warn("No content in clipboard to paste");return}P(),U();const t=Math.min(...M.value.map(u=>u.r)),e=Math.min(...M.value.map(u=>u.c)),l=Math.max(...M.value.map(u=>u.r)),n=Math.max(...M.value.map(u=>u.c)),c=(t+l)/2,a=(e+n)/2,i=Math.floor(d.value/2),r=Math.floor(v.value/2),m=i-c,p=r-a;let f=0;M.value.forEach(({r:u,c:A,color:S})=>{const b=A+p;let x=0;const pe=e%2===1,he=b%2===1;pe&&!he?(x=-1,console.info(`Odd→Even: sourceCol=${e}, targetCol=${b}, cellAdjustment=${x}`)):!pe&&he?(x=-1,console.info(`Even→Odd: sourceCol=${e}, targetCol=${b}, cellAdjustment=${x}`)):console.info(`Same type: sourceCol=${e}, targetCol=${b}, cellAdjustment=${x}`);const H=u+m+x,Z=b;H>=0&&H<d.value&&Z>=0&&Z<v.value&&s[H]&&s[H][Z]!==void 0&&(s[H][Z]=S,f++)}),console.info(`Pasted ${f} cells at center with peyote adjustment`),T()}function We(t,e){if(!M.value)return;P(),U();const l=Math.min(...M.value.map(a=>a.r)),n=Math.min(...M.value.map(a=>a.c));console.info("minC",n,"c",e);let c=0;M.value.forEach(({r:a,c:i,color:r})=>{const m=a-l,p=i-n,f=e+p;let u=0;const A=n%2===1,S=f%2===1;console.info("sourceIsOdd",A,"targetIsOdd",S),A&&!S?(i%2===1?u=0:u=-1,console.info(`Odd→Even: sourceCol=${n}, targetCol=${f}, cellAdjustment=${u}`)):!A&&S?(console.info(`Even→Odd: sourceCol=${n}, targetCol=${f}, cellAdjustment=${u}`),i%2===1?u=-1:u=-2):(console.info(`Same type: sourceCol=${n}, targetCol=${f}, cellAdjustment=${u}`),u=-1),console.info("cellAdjustment",u);const b=t+m+u,x=f;console.info(`Pasting cell: orig(${a},${i}) -> new(${b},${x}) offset(${m},${p}) cellAdjustment=${u}`),b>=0&&b<d.value&&x>=0&&x<v.value&&s[b]&&s[b][x]!==void 0&&(s[b][x]=r,c++)}),console.info(`Pasted ${c} cells at position (${t}, ${e}) with per-cell peyote adjustment`),T()}function ie(){M.value&&(F.value=!0)}function fe(){F.value=!1}function Fe(){return M.value&&M.value.length>0}function Be(){if($.value.length===0)return;P();const t=$.value.map(l=>{var a;const[n,c]=l.split(",").map(Number);return{r:n,c,color:((a=s[n])==null?void 0:a[c])||g.value}}),e=Math.max(...t.map(l=>l.c));t.forEach(({r:l,c:n,color:c})=>{const a=e-n;a>=0&&a<v.value&&s[l]&&s[l][a]!==void 0&&(s[l][a]=c)}),T()}function Je(){if($.value.length===0)return;P();const t=$.value.map(l=>{var a;const[n,c]=l.split(",").map(Number);return{r:n,c,color:((a=s[n])==null?void 0:a[c])||g.value}}),e=Math.max(...t.map(l=>l.r));t.forEach(({r:l,c:n,color:c})=>{const a=e-l;a>=0&&a<d.value&&s[a]&&s[a][n]!==void 0&&(s[a][n]=c)}),T()}function He(){if(O.value>0){J.value=!0,O.value--;const t=R.value[O.value];s.splice(0,s.length,...t),J.value=!1,console.info("Undo performed:",{historyIndex:O.value,historyLength:R.value.length})}else console.warn("No more undo history available")}function Xe(){if(O.value<R.value.length-1){J.value=!0,O.value++;const t=R.value[O.value];s.splice(0,s.length,...t),J.value=!1,console.info("Redo performed:",{historyIndex:O.value,historyLength:R.value.length})}else console.warn("No more redo history available")}function Ye(){P();for(let t=0;t<d.value;t++)for(let e=0;e<v.value;e++)s[t]&&s[t][e]!==void 0&&(s[t][e]=g.value);T()}function me(){return s.map(t=>[...t])}function qe(){const t={grid:me(),cols:v.value,rows:d.value,cellWidth:_.value,cellHeight:w.value,selectedColor:I.value,backgroundColor:g.value};localStorage.setItem("peyoteGrid",JSON.stringify(t))}function Qe(){const t=localStorage.getItem("peyoteGrid");if(t){const e=JSON.parse(t);if(v.value=e.cols||12,d.value=e.rows||36,_.value=e.cellWidth||15,w.value=e.cellHeight||15,I.value=e.selectedColor||le[2].hex,g.value=e.backgroundColor||"#ffffff",e.grid){re(d.value,v.value);for(let l=0;l<d.value;l++)for(let n=0;n<v.value;n++)s[l][n]=e.grid[l]&&e.grid[l][n]?e.grid[l][n]:null}}}async function Ke(){const t=document.createElement("canvas"),e=t.getContext("2d");t.width=v.value*_.value,t.height=d.value*w.value,e.fillStyle=g.value,e.fillRect(0,0,t.width,t.height);const l=[];for(let a=0;a<d.value;a++)for(let i=0;i<v.value;i++){const r=s[a][i]||g.value;if(r&&r.startsWith("data:image/")){const m=new Promise(p=>{const f=new Image;f.onload=()=>p({img:f,r:a,c:i}),f.src=r});l.push(m)}}const n=await Promise.all(l);for(let a=0;a<d.value;a++)for(let i=0;i<v.value;i++){const r=s[a][i]||g.value,m=i*_.value,p=a*w.value;if(r&&r.startsWith("data:image/")){const f=n.find(u=>u.r===a&&u.c===i);f&&e.drawImage(f.img,m,p,_.value,w.value)}else e.fillStyle=r,e.fillRect(m,p,_.value,w.value)}const c=document.createElement("a");c.download="peyote-grid.png",c.href=t.toDataURL(),c.click()}async function Ze(){const e=document.createElement("canvas"),l=e.getContext("2d");e.width=v.value*_.value*4,e.height=d.value*w.value*4,l.fillStyle=g.value,l.fillRect(0,0,e.width,e.height);const n=[];for(let i=0;i<d.value;i++)for(let r=0;r<v.value;r++){const m=s[i][r]||g.value;if(m&&m.startsWith("data:image/")){const p=new Promise(f=>{const u=new Image;u.onload=()=>f({img:u,r:i,c:r}),u.src=m});n.push(p)}}const c=await Promise.all(n);for(let i=0;i<d.value;i++)for(let r=0;r<v.value;r++){const m=s[i][r]||g.value,p=r*_.value*4,f=i*w.value*4,u=_.value*4,A=w.value*4;if(m&&m.startsWith("data:image/")){const S=c.find(b=>b.r===i&&b.c===r);S&&l.drawImage(S.img,p,f,u,A)}else l.fillStyle=m,l.fillRect(p,f,u,A)}const a=document.createElement("a");a.download="peyote-grid-hd.png",a.href=e.toDataURL(),a.click()}function et(){try{const t=[];for(let i=0;i<d.value;i++)for(let r=0;r<v.value;r++){const m=s[i][r]||g.value;t.push(m)}const e={grid:t,rows:d.value,cols:v.value,type:"peyote",timestamp:new Date().toISOString()},l=JSON.stringify(e,null,2),n=new Blob([l],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(n),a=document.createElement("a");a.href=c,a.download=`peyote_grid_${d.value}x${v.value}_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,a.click(),URL.revokeObjectURL(c)}catch(t){console.error("Error exporting TXT file:",t)}}function tt(t){const e=t.target.files[0];if(!e)return;const l=new FileReader;l.onload=n=>{try{const c=n.target.result.trim();console.info("TXT file content:",c);const a=c.split(`
`);if(c.startsWith("{")){const i=JSON.parse(c);if(i.grid&&i.rows&&i.cols){const{grid:r,rows:m,cols:p}=i;if(console.info("Parsed colors:",r.slice(0,10),"...","Length:",r.length),console.info("Expected length:",m*p,"Rows:",m,"Cols:",p),Array.isArray(r)&&r.every(f=>f===null||f===g.value||typeof f=="string"&&f.match(/^#[0-9A-Fa-f]{6}$/)))if(console.info("Color validation passed"),r.length===m*p){console.info("Length validation passed, updating grid..."),v.value=p,d.value=m,ye(()=>{const f=[];for(let u=0;u<m;u++){const A=[];for(let S=0;S<p;S++){const b=u*p+S,x=r[b];A.push(x??g.value)}f.push(A)}s.splice(0,s.length,...f),console.info("Grid loaded from TXT:",{rows:m,cols:p,gridData:f})});return}else console.error("Length mismatch:",r.length,"expected",m*p);else console.error("Color validation failed")}else console.error("Missing required fields in JSON")}if(a.length>2&&a[0].includes("Peyote Grid")){const i=a[0].match(/(\d+)x(\d+)/);if(i){const r=parseInt(i[1]),m=parseInt(i[2]);v.value=r,d.value=m,ye(()=>{const p=[];for(let f=2;f<a.length&&f-2<m;f++){const u=[],A=a[f];for(let S=0;S<r;S++){const b=S*2;if(b+1<A.length){const x=A.substring(b,b+2);u.push(x==="██"?"#FF0000":g.value)}else u.push(g.value)}p.push(u)}s.splice(0,s.length,...p)});return}}console.error("Unsupported TXT format")}catch(c){console.error("Error parsing TXT file:",c)}},l.readAsText(e)}function ge(t){const e=t.target.files[0];if(!e)return;const l=new FileReader;l.onload=n=>{const c=n.target.result;y.value=c,K(c),se()},l.readAsDataURL(e)}function lt(t){return{transform:`translateY(${t%2===1?w.value/2:0}px)`,gap:"0px"}}function ot(t,e){var r;const l=((r=s[t])==null?void 0:r[e])||g.value,n=$.value.includes(`${t},${e}`),c=F.value,a=l&&l.startsWith("data:image/"),i={width:`${_.value}px`,height:`${w.value}px`,boxSizing:"border-box",border:n?"2px solid #3b82f6":c?"1px solid #f59e0b":"1px solid #e5e7eb",cursor:c?"crosshair":"pointer",opacity:c?.9:1};return a?{...i,backgroundImage:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{...i,background:l}}return at(()=>{console.info("Component mounted. Initial dimensions:",{rows:d.value,cols:v.value}),$e();for(let t=0;t<v.value;t++){const e=Math.floor(d.value/2+Math.sin(t/1.5)*(d.value/6));e>=0&&e<d.value&&(s[e][t]=le[2].hex)}ce(),document.addEventListener("mouseup",de)}),it(()=>{document.removeEventListener("mouseup",de)}),(t,e)=>(k(),C("div",ct,[o("div",rt,[o("div",ut,[o("div",dt,[o("label",vt,[e[10]||(e[10]=o("span",{class:"upload-text"},"📁 آپلود فایل txt grid",-1)),o("input",{type:"file",accept:".txt",class:"upload-input",onChange:tt},null,32)]),o("label",ft,[e[11]||(e[11]=o("span",{class:"upload-text"},"📁 آپلود تصویر",-1)),o("input",{type:"file",accept:"image/*",class:"upload-input",onChange:ge},null,32)])]),y.value?(k(),C("div",mt,[o("img",{src:y.value,alt:"تصویر انتخاب شده",class:"preview-image"},null,8,gt)])):V("",!0)]),o("div",pt,[o("div",ht,[e[12]||(e[12]=o("h2",{class:"text-lg font-semibold mb-3"},"Peyote عمودی — ویرایشگر طرح",-1)),o("div",{ref:"gridWrapper",class:"overflow-auto border rounded p-2 bg-white",style:Y({height:Se.value+"px",minWidth:Ie.value+"px"})},[Me.value?(k(),C("div",bt,[(k(!0),C(ee,null,te(_e.value,l=>(k(),C("div",{key:l,class:"flex-shrink-0",style:Y({width:_.value+"px"})},[o("div",{class:"flex flex-col",style:Y(lt(l))},[(k(!0),C(ee,null,te(we.value,n=>(k(),C("div",{key:`${n}-${l}`,class:"cell cursor-pointer border-[1px] border-gray-200",style:Y(ot(n,l)),onMousedown:c=>Pe(n,l),onMouseenter:c=>Te(n,l)},null,44,yt))),128))],4)],4))),128))])):(k(),C("div",xt," Loading grid... "))],4),e[13]||(e[13]=o("p",{class:"mt-2 text-xs text-gray-500"},"راست‌کلیک = پاک کردن. می‌توانی تعداد ردیف/ستون را در متغیرها تغییر بدهی.",-1))])])]),o("div",Ct,[e[23]||(e[23]=o("div",{class:"controls-header"},[o("h3",{class:"mb-4 text-lg font-bold text-gray-800"},"🎨 ابزارهای طراحی")],-1)),o("div",kt,[o("div",_t,[e[14]||(e[14]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," 📐 ابعاد شبکه ",-1)),o("div",wt,[o("label",$t,[o("span",St,"ردیف‌ها: "+j(d.value),1),D(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[z,d.value,void 0,{number:!0}]])]),o("label",It,[o("span",Mt,"ستون‌ها: "+j(v.value),1),D(o("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[z,v.value,void 0,{number:!0}]])]),o("label",Rt,[o("span",Ot,"عرض سل: "+j(_.value)+"px",1),D(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>_.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[z,_.value,void 0,{number:!0}]])]),o("label",At,[o("span",Et,"ارتفاع سل: "+j(w.value)+"px",1),D(o("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[z,w.value,void 0,{number:!0}]])])])]),o("div",Gt,[e[16]||(e[16]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," 🎨 انتخاب رنگ ",-1)),o("div",Lt,[o("span",Pt,"حالت فعلی: "+j(L.value==="color"?"رنگ":"تصویر"),1)]),o("div",Tt,[D(o("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>I.value=l),type:"color",class:"color-picker",onChange:ue},null,544),[[z,I.value]]),o("span",Nt,j(I.value),1)]),o("div",Ut,[o("button",{class:W(["mode-btn",{active:L.value==="color"}]),onClick:ue}," 🎨 رنگ ",2),o("button",{class:W(["mode-btn",{active:L.value==="image"}]),disabled:!y.value,onClick:se}," 🖼️ تصویر ",10,Vt)]),o("div",Dt,[e[15]||(e[15]=o("h4",{class:"text-sm font-semibold text-gray-700"},"🔄 رنگ‌های اخیر",-1)),G.value.length>0?(k(),C("button",{key:0,class:"clear-colors-btn",title:"پاک کردن تمام رنگ‌ها",onClick:Ae}," 🗑️ پاک کردن ")):V("",!0)]),o("div",jt,[(k(!0),C(ee,null,te(G.value,l=>(k(),C("div",{key:l,class:"color-swatch",style:Y({backgroundColor:l}),title:l,onClick:n=>I.value=l},[o("button",{class:"remove-color-btn",onClick:xe(n=>Oe(l),["stop"])}," × ",8,Wt)],12,zt))),128))])]),o("div",Ft,[e[19]||(e[19]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," 🖼️ انتخاب تصویر ",-1)),o("div",Bt,[o("label",Jt,[e[17]||(e[17]=o("span",{class:"image-upload-text"},"📁 آپلود تصویر",-1)),o("input",{type:"file",accept:"image/*",class:"image-upload-input",onChange:ge},null,32)])]),y.value?(k(),C("div",Ht,[o("img",{src:y.value,alt:"تصویر انتخاب شده",class:"preview-image-small"},null,8,Xt),o("button",{title:"حذف تصویر",class:"remove-image-btn",onClick:Le}," × ")])):V("",!0),E.value.length>0?(k(),C("div",Yt,[e[18]||(e[18]=o("h4",{class:"text-sm font-semibold text-gray-700"},"🔄 تصاویر اخیر",-1)),o("button",{class:"clear-images-btn",title:"پاک کردن تمام تصاویر",onClick:Ge}," 🗑️ پاک کردن ")])):V("",!0),E.value.length>0?(k(),C("div",qt,[(k(!0),C(ee,null,te(E.value,l=>(k(),C("div",{key:l,class:W(["image-swatch",{active:y.value===l}]),onClick:n=>{y.value=l,se()}},[o("img",{src:l,alt:"تصویر اخیر",class:"image-swatch-img"},null,8,Kt),o("button",{class:"remove-image-btn-small",onClick:xe(n=>Ee(l),["stop"])}," × ",8,Zt)],10,Qt))),128))])):V("",!0)]),o("div",el,[e[21]||(e[21]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"🛠️ ابزارها",-1)),o("div",tl,[o("button",{class:W(["tool-btn primary",{active:N.value==="paint"}]),onClick:e[5]||(e[5]=l=>ae("paint"))}," 🖌️ Paint ",2),o("button",{class:W(["tool-btn primary",{active:N.value==="fill"}]),onClick:e[6]||(e[6]=l=>ae("fill"))}," 🪣 Fill ",2),o("button",{class:W(["tool-btn secondary",{active:N.value==="select"}]),onClick:e[7]||(e[7]=l=>ae("select"))}," 📐 Select ",2),o("button",{class:"tool-btn secondary",onClick:De}," 📋 Copy "),o("button",{class:"tool-btn secondary",onClick:je}," ✂️ Cut "),o("button",{class:"tool-btn secondary",onClick:ze}," 📍 Paste at Center "),o("button",{class:"tool-btn secondary",disabled:!Fe(),onClick:ie}," 🎯 Enable Click-to-Paste ",8,ll),F.value?(k(),C("button",{key:0,class:"tool-btn danger",onClick:fe}," ❌ Cancel Click-to-Paste ")):V("",!0),o("button",{class:"tool-btn secondary",onClick:U}," 🗑️ Clear Selection "),o("button",{class:"tool-btn secondary",disabled:$.value.length===0,onClick:Be}," 🔄 Mirror Selection ",8,ol),o("button",{class:"tool-btn secondary",disabled:$.value.length===0,onClick:Je}," ↕️ Mirror Selection Vertical ",8,nl),o("button",{class:"tool-btn secondary",onClick:He}," ↩️ Undo "),o("button",{class:"tool-btn secondary",onClick:Xe}," ↪️ Redo ")]),o("div",sl,[e[20]||(e[20]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"🎨 رنگ پس‌زمینه",-1)),o("div",al,[D(o("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>g.value=l),type:"color",class:"color-picker",title:"انتخاب رنگ پس‌زمینه"},null,512),[[z,g.value]]),o("button",{class:"tool-btn success",onClick:Ye}," 🎨 تغییر تمام مهره‌ها ")])])]),o("div",il,[e[22]||(e[22]=o("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"📤 خروجی",-1)),o("div",{class:"save-load-buttons mb-3"},[o("button",{class:"export-btn success",onClick:qe}," 💾 ذخیره گرید "),o("button",{class:"export-btn info",onClick:Qe}," 📂 بارگذاری اخرین ذخیره ")]),o("div",cl,[o("button",{class:"export-btn primary",onClick:e[9]||(e[9]=l=>ke("update-grid",me()))}," 🚀 ارسال به 3D "),o("button",{class:"export-btn success",onClick:Ke}," 📷 خروجی عکس "),o("button",{class:"export-btn info",onClick:Ze}," 🖼️ خروجی HD "),o("button",{class:"export-btn warning",onClick:et}," 📄 خروجی TXT ")])])])])]))}},vl=nt(rl,[["__scopeId","data-v-15b2adaf"]]);export{vl as G};
