import{_ as gt,r as _,G as ue,m as ft,w as lt,n as ht,p as yt,X as kt,c as r,a as t,b as I,x as f,t as S,q as O,v as A,F as L,u as W,Y as Ge,o as d,z as q,A as ne}from"./index-DPMVW6DN.js";const Ct={class:"peyote-editor-container overflow-auto"},xt={class:"mobile-control-bar"},_t={key:0,class:"pinned-section"},$t={class:"pinned-section-header"},St={class:"pinned-section-title"},jt={class:"pinned-section-content"},wt={key:0,class:"pinned-dimensions"},It={class:"dimension-inputs"},Mt={class:"dimension-label"},Ut={class:"dimension-label"},Pt={class:"dimension-label"},Ot={class:"dimension-label"},At={class:"dimension-label"},Rt={class:"orientation-toggle-group"},Vt={key:1,class:"pinned-color"},Nt={class:"color-picker-container"},Tt={class:"color-value"},zt={class:"recent-colors-header"},Et={class:"recent-colors-grid"},Dt=["title","onClick"],Gt=["onClick"],Lt={key:2,class:"pinned-mode"},Wt={class:"mode-toggle"},Ft={key:3,class:"pinned-image"},Bt={class:"image-picker-container"},Xt={class:"available-images-grid"},Ht=["onClick"],Jt=["src","alt"],Yt={class:"image-name"},qt={key:0,class:"recent-images-section"},Qt={class:"recent-images-grid"},Kt=["onClick"],Zt=["src","alt"],el=["onClick"],tl={key:4,class:"pinned-tools"},ll={class:"tools-grid"},nl=["disabled"],ol=["disabled"],sl=["disabled"],il={key:5,class:"pinned-export"},al={class:"grid grid-cols-2 gap-2"},cl={class:"mobile-panel-content"},ul={class:"mobile-image-section"},rl={class:"upload-section grid grid-cols-2 gap-2"},dl={class:"upload-label"},vl={class:"upload-label"},pl={key:0,class:"image-preview"},ml=["src"],bl={class:"mobile-controls-content"},gl={class:"controls-content"},fl={class:"dimensions-section"},hl={class:"section-header"},yl=["title"],kl={class:"dimension-inputs"},Cl={class:"dimension-label"},xl={class:"dimension-label"},_l={class:"dimension-label"},$l={class:"dimension-label"},Sl={class:"color-section"},jl={class:"section-header"},wl=["title"],Il={class:"color-picker-container"},Ml={class:"color-value"},Ul={class:"recent-colors-header mt-3!"},Pl={class:"recent-colors-grid"},Ol=["title","onClick"],Al=["onClick"],Rl={class:"mode-section"},Vl={class:"section-header"},Nl=["title"],Tl={class:"mode-toggle"},zl={key:0,class:"mode-section"},El={class:"section-header"},Dl=["title"],Gl={class:"image-picker-container"},Ll={class:"available-images-grid"},Wl=["onClick"],Fl=["src","alt"],Bl={class:"image-name"},Xl={key:0,class:"recent-images-section"},Hl={class:"recent-images-grid"},Jl=["onClick"],Yl=["src","alt"],ql=["onClick"],Ql={class:"tools-section"},Kl={class:"section-header"},Zl=["title"],en={class:"tools-grid"},tn=["disabled"],ln=["disabled"],nn=["disabled"],on={class:"background-color-section !mt-4"},sn={class:"background-color-controls"},an={class:"export-section"},cn={class:"section-header"},un=["title"],rn={class:"grid grid-cols-2 gap-2"},dn={key:0,class:"image-section"},vn={class:"upload-section grid grid-cols-2 gap-2"},pn={class:"upload-label"},mn={class:"upload-label"},bn={key:0,class:"image-preview"},gn=["src"],fn={class:"main-content"},hn={class:"p-4"},yn={ref:"gridWrapper",class:"h-[80vh] overflow-auto rounded border bg-white p-2"},kn={key:0,class:"flex items-start",style:{gap:"0px"}},Cn=["onMousedown","onMouseenter"],xn={key:1,class:"flex flex-col items-start",style:{gap:"0px"}},_n=["onMousedown","onMouseenter"],$n={key:2,class:"flex h-full items-center justify-center text-gray-500"},Sn={class:"controls-panel"},jn={class:"controls-content"},wn={class:"dimensions-section"},In={class:"section-header"},Mn=["title"],Un={class:"dimension-inputs"},Pn={class:"dimension-label"},On={class:"dimension-text"},An={class:"dimension-label"},Rn={class:"dimension-text"},Vn={class:"dimension-label"},Nn={class:"dimension-text"},Tn={class:"dimension-label"},zn={class:"dimension-text"},En={class:"dimension-label"},Dn={class:"orientation-toggle-group"},Gn={class:"section-header"},Ln={class:"color-section"},Wn={class:"section-header"},Fn=["title"],Bn={class:"color-picker-container"},Xn={class:"color-value"},Hn={class:"recent-colors-header mt-3!"},Jn={class:"recent-colors-grid"},Yn=["title","onClick"],qn=["onClick"],Qn={class:"mode-section"},Kn={class:"section-header"},Zn=["title"],eo={class:"mode-toggle"},to={key:0,class:"image-section"},lo={class:"section-header"},no=["title"],oo={class:"image-picker-container"},so={class:"available-images-grid"},io=["onClick"],ao=["src","alt"],co={class:"image-name"},uo={key:0,class:"recent-images-section"},ro={class:"recent-images-grid"},vo=["onClick"],po=["src","alt"],mo=["onClick"],bo={class:"tools-section"},go={class:"section-header"},fo=["title"],ho={class:"tools-grid"},yo=["disabled"],ko=["disabled"],Co=["disabled"],xo={class:"background-color-section !mt-4"},_o={class:"background-color-controls"},$o={class:"export-section"},So={class:"section-header"},jo=["title"],wo={class:"grid grid-cols-2 gap-2"},Io={__name:"PeyoteGridEditor",props:{initialPattern:{type:Array,default:null},initialRows:{type:Number,default:null},initialCols:{type:Number,default:null}},emits:["update-grid"],setup(nt,{emit:ot}){const X=nt,re=ot,ee=_(null),V=_([]),N=_("color"),de=_(!0),ve=_([]),P=_(null),oe=_(!1),v=_(null);function st(){oe.value=!oe.value}function F(n){v.value===n?v.value=null:(v.value=n,oe.value=!1)}function it(){v.value=null}function at(n){return{dimensions:"üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá",color:"üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø",mode:"üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å",image:"üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ±",tools:"üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",export:"üì§ ÿÆÿ±Ÿàÿ¨€å"}[n]||n}const b=_(X.initialCols??12),p=_(X.initialRows??50),y=_(15),k=_(17),$=_("vertical"),ye=[{key:"DB-1510",hex:"#efe9df"},{key:"DB-1503",hex:"#efbfc7"},{key:"DB-0914",hex:"#d92e5b"},{key:"DB-1832",hex:"#d39c2a"}],w=_(ye[2].hex),x=_("#ffffff"),Le=ue(()=>Array.from({length:b.value},(n,e)=>e)),We=ue(()=>Array.from({length:p.value},(n,e)=>e)),s=ft([]);function ke(n=null){const e=Array.from({length:p.value},()=>Array.from({length:b.value},()=>x.value));if(n&&Array.isArray(n)&&n.length>0)for(let l=0;l<p.value;l++)for(let o=0;o<b.value;o++){const i=l*b.value+o;i<n.length&&(e[l][o]=n[i]||x.value)}s.splice(0,s.length,...e),Z.value=!0,console.info("Grid initialized:",{rows:p.value,cols:b.value,gridLength:s.length,hasInitialPattern:!!n}),D.value=[JSON.parse(JSON.stringify(s))],G.value=0}ue(()=>$.value==="horizontal"?b.value*k.value+k.value:p.value*k.value+k.value),ue(()=>$.value==="horizontal"?p.value*y.value+y.value:b.value*y.value+y.value);const Fe=ue(()=>{var e,l;const n=Z.value&&s.length===p.value&&s.length>0&&((e=s[0])==null?void 0:e.length)===b.value;return console.info("Grid ready check:",{gridInitialized:Z.value,gridLength:s.length,rows:p.value,cols:b.value,firstRowLength:(l=s[0])==null?void 0:l.length,ready:n}),n}),B=_("paint"),M=_([]),T=_(null),K=_(!1),z=_([]),Ce=_(!1),ct=_(!1),pe=_(null),Z=_(!1),D=_([]),G=_(-1),se=_(!1),xe=_(!1);function Be(){if(se.value)return;const n=JSON.parse(JSON.stringify(s));G.value<D.value.length-1&&(D.value=D.value.slice(0,G.value+1)),D.value.push(n),G.value=D.value.length-1,D.value.length>10&&(D.value.shift(),G.value--),console.info("Saved to history:",{historyLength:D.value.length,historyIndex:G.value})}function H(){xe.value=!0}function J(){xe.value&&(Be(),xe.value=!1)}lt(()=>[X.initialPattern,X.initialRows,X.initialCols],([n,e,l],[o])=>{Z.value&&n&&Array.isArray(n)&&n.length>0&&n!==o&&(e&&e!==p.value&&(p.value=e),l&&l!==b.value&&(b.value=l),Ge(()=>{ke(n)}))},{deep:!0}),lt([p,b],([n,e],[l,o])=>{if(!Z.value){console.info("Grid not initialized yet, skipping resize");return}const i=Math.max(1,Math.min(200,n||1)),a=Math.max(1,Math.min(200,e||1));i!==n&&(p.value=i),a!==e&&(b.value=a),(i!==l||a!==o)&&(console.info("Dimensions changed:",{oldRows:l,oldCols:o,newRows:i,newCols:a}),Xe(i,a))});function Xe(n,e){var a;const l=p.value,o=b.value;console.info("Resizing grid:",{oldRows:l,oldCols:o,newRows:n,newCols:e}),H();const i=Array.from({length:n},()=>Array.from({length:e},()=>x.value));if(s.length>0&&s[0]!==void 0)for(let c=0;c<Math.min(l,n);c++)for(let u=0;u<Math.min(o,e);u++)s[c]&&s[c][u]!==void 0&&(i[c][u]=s[c][u]);s.splice(0,s.length,...i),Z.value=!0,console.info("Grid resized successfully. New grid dimensions:",{rows:n,cols:e,actualGridLength:s.length,actualFirstRowLength:(a=s[0])==null?void 0:a.length}),J()}function _e(n){if(n===x.value)return;const e=z.value.indexOf(n);e>-1&&z.value.splice(e,1),z.value.unshift(n),z.value.length>20&&(z.value=z.value.slice(0,20))}function $e(n){const e=z.value.indexOf(n);e>-1&&z.value.splice(e,1)}function Se(){z.value=[]}function me(n){const e=V.value.findIndex(l=>l.url===n.url);e>-1&&V.value.splice(e,1),V.value.unshift(n),V.value.length>10&&(V.value=V.value.slice(0,10))}function je(n){const e=V.value.findIndex(l=>l.url===n.url);e>-1&&V.value.splice(e,1)}function we(){V.value=[]}function be(){N.value="color"}function ge(){N.value="image"}function ut(){const n=["310.jpg","1130.jpg","1135.jpg","2116.jpg","2131.jpg","2132.jpg","725.jpg","877.jpg","f111.jpg","f222.jpg","f333.jpg","f444.jpg","f555.jpg","f666.jpg","f777.jpg","f888.jpg","f999.jpg","f1010.jpg","f1111.jpg","f1212.jpg","f1313.jpg","f1414.jpg","f1515.jpg","Awhite.jpg","Turquoise.jpg","db0042.jpg","db0221.jpg","db0231.jpg","db0268.jpg","db0623.jpg","db0627.jpg","db0635.jpg","db0651.jpg","db0680.jpg","db0721.jpg","db0722.jpg","db0723.jpg","db0725.jpg","db0726.jpg","db0729.jpg","db0759.jpg","db0763.jpg","db0791.jpg","db0796.jpg","db0877.jpg","db1132.jpg","db1133.jpg","db1135.jpg","db1153.jpg","db1262.jpg","db1570.jpg","db1802.jpg","db1832.jpg","db1832-2.jpg","db2111.jpg","db2127.jpg","db2131.jpg","db2132.jpg","db2144.jpg","db2316.jpg","db2352.jpg","db2357.jpg","db310.jpg","db626.jpg","db732.jpg","db856.jpg"];ve.value=n.map(e=>({name:e,url:`/miyuki-beads-designer/beads/${e}`,displayName:e.replace(".jpg","")}))}function te(n){P.value=n,me(n),ge()}function Y(n){B.value=n,Q(),fe()}function He(n,e){if(K.value){pt(n,e);return}switch(Ce.value=!0,pe.value=`${n},${e}`,B.value){case"paint":H(),rt(n,e);break;case"fill":H(),vt(n,e),J();break;case"select":qe(n,e);break}}function Je(n,e){if(!Ce.value)return;const l=`${n},${e}`;if(l!==pe.value)switch(pe.value=l,B.value){case"paint":dt(n,e);break;case"select":qe(n,e);break}}function Ye(){J(),Ce.value=!1,ct.value=!1,pe.value=null}function rt(n,e){if(s[n]&&s[n][e]!==void 0){const l=s[n][e],o=N.value==="image"&&P.value?P.value.url:w.value;l!==o&&(s[n][e]=o,o===w.value?_e(w.value):N.value==="image"&&P.value&&o===P.value.url&&me(P.value))}}function dt(n,e){if(s[n]&&s[n][e]!==void 0){const l=N.value==="image"&&P.value?P.value.url:w.value;s[n][e]=l,l===w.value?_e(w.value):N.value==="image"&&P.value&&me(P.value)}}function vt(n,e){if(!s[n]||s[n][e]===void 0)return;const l=s[n][e],o=N.value==="image"&&P.value?P.value.url:w.value;if(l===o)return;const i=new Set,a=[[n,e]];for(;a.length>0;){const[c,u]=a.pop(),h=`${c},${u}`;i.has(h)||c<0||c>=p.value||u<0||u>=b.value||!s[c]||s[c][u]!==l||(i.add(h),s[c][u]=o,a.push([c+1,u],[c-1,u],[c,u+1],[c,u-1]))}o===w.value?_e(o):o===ee.value&&me(o)}function qe(n,e){const l=`${n},${e}`,o=M.value.indexOf(l);o>-1?M.value.splice(o,1):M.value.push(l)}function Q(){M.value=[]}function Ie(){if(M.value.length===0){console.warn("No cells selected for copying");return}const n=M.value.map(e=>{var i;const[l,o]=e.split(",").map(Number);return{r:l,c:o,color:((i=s[l])==null?void 0:i[o])||x.value}});T.value=n,console.info(`Copied ${n.length} cells to clipboard`),Q(),ie()}function Me(){if(M.value.length===0){console.warn("No cells selected for cutting");return}H();const n=M.value.map(e=>{var i;const[l,o]=e.split(",").map(Number);return{r:l,c:o,color:((i=s[l])==null?void 0:i[o])||x.value}});T.value=n,console.info(`Cut ${n.length} cells to clipboard`),M.value.forEach(e=>{const[l,o]=e.split(",").map(Number);s[l]&&s[l][o]!==void 0&&(s[l][o]=x.value)}),Q(),ie(),J()}function Ue(){if(!T.value){console.warn("No content in clipboard to paste");return}H(),Q();const n=Math.min(...T.value.map(m=>m.r)),e=Math.min(...T.value.map(m=>m.c)),l=Math.max(...T.value.map(m=>m.r)),o=Math.max(...T.value.map(m=>m.c)),i=(n+l)/2,a=(e+o)/2,c=Math.floor(p.value/2),u=Math.floor(b.value/2),h=c-i,C=u-a;let g=0;T.value.forEach(({r:m,c:E,color:U})=>{const j=E+C;let R=0;const le=e%2===1,tt=j%2===1;le&&!tt?(R=-1,console.info(`Odd‚ÜíEven: sourceCol=${e}, targetCol=${j}, cellAdjustment=${R}`)):!le&&tt?(R=-1,console.info(`Even‚ÜíOdd: sourceCol=${e}, targetCol=${j}, cellAdjustment=${R}`)):console.info(`Same type: sourceCol=${e}, targetCol=${j}, cellAdjustment=${R}`);const ce=m+h+R,he=j;ce>=0&&ce<p.value&&he>=0&&he<b.value&&s[ce]&&s[ce][he]!==void 0&&(s[ce][he]=U,g++)}),console.info(`Pasted ${g} cells at center with peyote adjustment`),J()}function pt(n,e){if(!T.value)return;H(),Q();const l=Math.min(...T.value.map(a=>a.r)),o=Math.min(...T.value.map(a=>a.c));console.info("minC",o,"c",e);let i=0;T.value.forEach(({r:a,c,color:u})=>{const h=a-l,C=c-o,g=e+C;let m=0;const E=o%2===1,U=g%2===1;console.info("sourceIsOdd",E,"targetIsOdd",U),E&&!U?(c%2===1?m=0:m=-1,console.info(`Odd‚ÜíEven: sourceCol=${o}, targetCol=${g}, cellAdjustment=${m}`)):!E&&U?(console.info(`Even‚ÜíOdd: sourceCol=${o}, targetCol=${g}, cellAdjustment=${m}`),c%2===1?m=-1:m=-2):(console.info(`Same type: sourceCol=${o}, targetCol=${g}, cellAdjustment=${m}`),m=-1),console.info("cellAdjustment",m);const j=n+h+m,R=g;console.info(`Pasting cell: orig(${a},${c}) -> new(${j},${R}) offset(${h},${C}) cellAdjustment=${m}`),j>=0&&j<p.value&&R>=0&&R<b.value&&s[j]&&s[j][R]!==void 0&&(s[j][R]=u,i++)}),console.info(`Pasted ${i} cells at position (${n}, ${e}) with per-cell peyote adjustment`),J()}function ie(){T.value&&(K.value=!0)}function fe(){K.value=!1}function Pe(){return T.value&&T.value.length>0}function Oe(){if(M.value.length===0)return;H();const n=M.value.map(l=>{var a;const[o,i]=l.split(",").map(Number);return{r:o,c:i,color:((a=s[o])==null?void 0:a[i])||x.value}}),e=Math.max(...n.map(l=>l.c));n.forEach(({r:l,c:o,color:i})=>{const a=e-o;a>=0&&a<b.value&&s[l]&&s[l][a]!==void 0&&(s[l][a]=i)}),J()}function Ae(){if(M.value.length===0)return;H();const n=M.value.map(l=>{var a;const[o,i]=l.split(",").map(Number);return{r:o,c:i,color:((a=s[o])==null?void 0:a[i])||x.value}}),e=Math.max(...n.map(l=>l.r));n.forEach(({r:l,c:o,color:i})=>{const a=e-l;a>=0&&a<p.value&&s[a]&&s[a][o]!==void 0&&(s[a][o]=i)}),J()}function Re(){if(G.value>0){se.value=!0,G.value--;const n=D.value[G.value];s.splice(0,s.length,...n),se.value=!1,console.info("Undo performed:",{historyIndex:G.value,historyLength:D.value.length})}else console.warn("No more undo history available")}function Ve(){if(G.value<D.value.length-1){se.value=!0,G.value++;const n=D.value[G.value];s.splice(0,s.length,...n),se.value=!1,console.info("Redo performed:",{historyIndex:G.value,historyLength:D.value.length})}else console.warn("No more redo history available")}function Qe(){H();for(let n=0;n<p.value;n++)for(let e=0;e<b.value;e++)s[n]&&s[n][e]!==void 0&&(s[n][e]=x.value);J()}function ae(){return s.map(n=>[...n])}function Ne(){const n={grid:ae(),cols:b.value,rows:p.value,cellWidth:y.value,cellHeight:k.value,selectedColor:w.value,backgroundColor:x.value,orientation:$.value};localStorage.setItem("peyoteGrid",JSON.stringify(n))}function Te(){const n=localStorage.getItem("peyoteGrid");if(n){const e=JSON.parse(n);if(b.value=e.cols||12,p.value=e.rows||36,y.value=e.cellWidth||15,k.value=e.cellHeight||15,w.value=e.selectedColor||ye[2].hex,x.value=e.backgroundColor||"#ffffff",e.orientation&&(e.orientation==="vertical"||e.orientation==="horizontal")&&($.value=e.orientation),e.grid){Xe(p.value,b.value);for(let l=0;l<p.value;l++)for(let o=0;o<b.value;o++)s[l][o]=e.grid[l]&&e.grid[l][o]?e.grid[l][o]:null}}}async function ze(){const n=document.createElement("canvas"),e=n.getContext("2d");$.value==="horizontal"?(n.width=b.value*y.value+y.value/2,n.height=p.value*k.value):(n.width=b.value*y.value,n.height=p.value*k.value+k.value/2),e.fillStyle=x.value,e.fillRect(0,0,n.width,n.height);const l=[];for(let a=0;a<p.value;a++)for(let c=0;c<b.value;c++){const u=s[a][c]||x.value;if(u&&(u.startsWith("data:image/")||u.startsWith("/miyuki-beads-designer/beads/"))){const h=new Promise(C=>{const g=new Image;g.onload=()=>C({img:g,r:a,c}),g.onerror=()=>C({img:null,r:a,c}),g.src=u});l.push(h)}}const o=await Promise.all(l);for(let a=0;a<p.value;a++)for(let c=0;c<b.value;c++){const u=s[a][c]||x.value;let h,C;if($.value==="horizontal"){const g=a%2===1?y.value/2:0;h=c*y.value+g,C=a*k.value}else{const g=c%2===1?k.value/2:0;h=c*y.value,C=a*k.value+g}if(u&&(u.startsWith("data:image/")||u.startsWith("/miyuki-beads-designer/beads/"))){const g=o.find(m=>m.r===a&&m.c===c);g&&g.img&&e.drawImage(g.img,h,C,y.value,k.value)}else e.fillStyle=u,e.fillRect(h,C,y.value,k.value)}const i=document.createElement("a");i.download=`peyote-grid-${$.value}.png`,i.href=n.toDataURL(),i.click()}async function Ee(){const e=document.createElement("canvas"),l=e.getContext("2d");$.value==="horizontal"?(e.width=(b.value*y.value+y.value/2)*4,e.height=p.value*k.value*4):(e.width=b.value*y.value*4,e.height=(p.value*k.value+k.value/2)*4),l.fillStyle=x.value,l.fillRect(0,0,e.width,e.height);const o=[];for(let c=0;c<p.value;c++)for(let u=0;u<b.value;u++){const h=s[c][u]||x.value;if(h&&(h.startsWith("data:image/")||h.startsWith("/miyuki-beads-designer/beads/"))){const C=new Promise(g=>{const m=new Image;m.onload=()=>g({img:m,r:c,c:u}),m.onerror=()=>g({img:null,r:c,c:u}),m.src=h});o.push(C)}}const i=await Promise.all(o);for(let c=0;c<p.value;c++)for(let u=0;u<b.value;u++){const h=s[c][u]||x.value;let C,g;if($.value==="horizontal"){const U=c%2===1?y.value/2:0;C=(u*y.value+U)*4,g=c*k.value*4}else{const U=u%2===1?k.value/2:0;C=u*y.value*4,g=(c*k.value+U)*4}const m=y.value*4,E=k.value*4;if(h&&(h.startsWith("data:image/")||h.startsWith("/miyuki-beads-designer/beads/"))){const U=i.find(j=>j.r===c&&j.c===u);U&&U.img&&l.drawImage(U.img,C,g,m,E)}else l.fillStyle=h,l.fillRect(C,g,m,E)}const a=document.createElement("a");a.download=`peyote-grid-hd-${$.value}.png`,a.href=e.toDataURL(),a.click()}function De(){try{const n=[];for(let c=0;c<p.value;c++)for(let u=0;u<b.value;u++){const h=s[c][u]||x.value;n.push(h)}const e={grid:n,rows:p.value,cols:b.value,orientation:$.value,type:"peyote",timestamp:new Date().toISOString()},l=JSON.stringify(e,null,2),o=new Blob([l],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(o),a=document.createElement("a");a.href=i,a.download=`peyote_grid_${p.value}x${b.value}_${$.value}_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,a.click(),URL.revokeObjectURL(i)}catch(n){console.error("Error exporting TXT file:",n)}}function Ke(n){const e=n.target.files[0];if(!e)return;const l=new FileReader;l.onload=o=>{try{const i=o.target.result.trim();console.info("TXT file content:",i);const a=i.split(`
`);if(i.startsWith("{")){const c=JSON.parse(i);if(c.grid&&c.rows&&c.cols){const{grid:u,rows:h,cols:C,orientation:g}=c;if(console.info("Parsed colors:",u.slice(0,10),"...","Length:",u.length),console.info("Expected length:",h*C,"Rows:",h,"Cols:",C),console.info("Orientation:",g||"vertical (default)"),g&&(g==="vertical"||g==="horizontal")&&($.value=g,console.info("Grid orientation set to:",g)),Array.isArray(u)&&u.every(m=>m===null||m===x.value||typeof m=="string"&&(m.match(/^#[0-9A-Fa-f]{6}$/)||m.startsWith("data:image/")||m.startsWith("/miyuki-beads-designer/beads/"))))if(console.info("Color validation passed"),u.length===h*C){console.info("Length validation passed, updating grid..."),b.value=C,p.value=h,Ge(()=>{const m=[];for(let E=0;E<h;E++){const U=[];for(let j=0;j<C;j++){const R=E*C+j,le=u[R];U.push(le??x.value)}m.push(U)}s.splice(0,s.length,...m),console.info("Grid loaded from TXT:",{rows:h,cols:C,orientation:$.value,gridData:m})});return}else console.error("Length mismatch:",u.length,"expected",h*C);else console.error("Color validation failed")}else console.error("Missing required fields in JSON")}if(a.length>2&&a[0].includes("Peyote Grid")){const c=a[0].match(/(\d+)x(\d+)/);if(c){const u=parseInt(c[1]),h=parseInt(c[2]);b.value=u,p.value=h,Ge(()=>{const C=[];for(let g=2;g<a.length&&g-2<h;g++){const m=[],E=a[g];for(let U=0;U<u;U++){const j=U*2;if(j+1<E.length){const R=E.substring(j,j+2);m.push(R==="‚ñà‚ñà"?"#FF0000":x.value)}else m.push(x.value)}C.push(m)}s.splice(0,s.length,...C)});return}}console.error("Unsupported TXT format")}catch(i){console.error("Error parsing TXT file:",i)}},l.readAsText(e)}function Ze(n){const e=n.target.files[0];if(!e)return;const l=new FileReader;l.onload=o=>{const i=o.target.result;ee.value=i},l.readAsDataURL(e)}function mt(n){return{transform:`translateY(${n%2===1?k.value/2:0}px)`,gap:"0px"}}function bt(n){return{transform:`translateX(${n%2===1?y.value/2:0}px)`,gap:"0px"}}function et(n,e){var u;const l=((u=s[n])==null?void 0:u[e])||x.value,o=M.value.includes(`${n},${e}`),i=K.value,a=l&&(l.startsWith("data:image/")||l.startsWith("/miyuki-beads-designer/beads/")),c={width:`${y.value}px`,height:`${k.value}px`,boxSizing:"border-box",border:o?"2px solid #3b82f6":i?"1px solid #f59e0b":"1px solid #e5e7eb",cursor:i?"crosshair":"pointer",opacity:i?.9:1};return a?{...c,backgroundColor:"transparent",backgroundImage:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{...c,background:l}}return ht(()=>{if(console.info("Component mounted. Initial dimensions:",{rows:p.value,cols:b.value,hasInitialPattern:!!X.initialPattern}),X.initialPattern&&X.initialPattern.length>0)ke(X.initialPattern);else{ke();for(let n=0;n<b.value;n++){const e=Math.floor(p.value/2+Math.sin(n/1.5)*(p.value/6));e>=0&&e<p.value&&(s[e][n]=ye[2].hex)}}ut(),Be(),document.addEventListener("mouseup",Ye)}),yt(()=>{Z.value&&s.length>0&&re("update-grid",ae())}),kt(()=>{document.removeEventListener("mouseup",Ye)}),(n,e)=>(d(),r("div",Ct,[t("div",xt,[t("button",{class:f(["mobile-menu-btn",{active:oe.value}]),onClick:st},e[46]||(e[46]=[t("span",{class:"menu-icon"},"‚ò∞",-1),t("span",{class:"menu-text"},"ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",-1)]),2),e[47]||(e[47]=t("div",{class:"mobile-title"},"üé® Ÿà€åÿ±ÿß€åÿ¥⁄Øÿ± Peyote",-1))]),v.value?(d(),r("div",_t,[t("div",$t,[t("h4",St,S(at(v.value)),1),t("button",{class:"unpin-btn",title:"Unpin Section",onClick:it}," ‚úï ")]),t("div",jt,[v.value==="dimensions"?(d(),r("div",wt,[t("div",It,[t("label",Mt,[e[48]||(e[48]=t("span",{class:"dimension-text"},"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[A,p.value,void 0,{number:!0}]])]),t("label",Ut,[e[49]||(e[49]=t("span",{class:"dimension-text"},"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[A,b.value,void 0,{number:!0}]])]),t("label",Pt,[e[50]||(e[50]=t("span",{class:"dimension-text"},"ÿπÿ±ÿ∂ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,y.value,void 0,{number:!0}]])]),t("label",Ot,[e[51]||(e[51]=t("span",{class:"dimension-text"},"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,k.value,void 0,{number:!0}]])]),t("div",At,[e[52]||(e[52]=t("span",{class:"dimension-text"},"ÿ¨Ÿáÿ™ ⁄Øÿ±€åÿØ:",-1)),t("div",Rt,[t("button",{class:f(["orientation-toggle-btn",{active:$.value==="vertical"}]),onClick:e[4]||(e[4]=l=>$.value="vertical")}," ‚ÜïÔ∏è ÿπŸÖŸàÿØ€å ",2),t("button",{class:f(["orientation-toggle-btn",{active:$.value==="horizontal"}]),onClick:e[5]||(e[5]=l=>$.value="horizontal")}," ‚ÜîÔ∏è ÿßŸÅŸÇ€å ",2)])])])])):I("",!0),v.value==="color"?(d(),r("div",Vt,[t("div",Nt,[O(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>w.value=l),type:"color",class:"color-picker"},null,512),[[A,w.value]]),t("span",Tt,S(w.value),1)]),t("div",zt,[e[53]||(e[53]=t("h4",{class:"text-sm font-semibold text-gray-700"},"üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ±",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Et,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:q({backgroundColor:l}),title:l,onClick:o=>w.value=l},[t("button",{class:"remove-color-btn",onClick:ne(o=>$e(l),["stop"])}," √ó ",8,Gt)],12,Dt))),128))])])):I("",!0),v.value==="mode"?(d(),r("div",Lt,[t("div",Wt,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:be}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:ge}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])])):I("",!0),v.value==="image"?(d(),r("div",Ft,[t("div",Bt,[t("div",Xt,[(d(!0),r(L,null,W(ve.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,Jt),t("span",Yt,S(l.displayName),1)],10,Ht)}),128))])]),V.value.length>0?(d(),r("div",qt,[t("div",{class:"recent-images-header"},[e[54]||(e[54]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:we}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",Qt,[(d(!0),r(L,null,W(V.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,Zt),t("button",{class:"remove-image-btn",onClick:ne(i=>je(l),["stop"])}," √ó ",8,el)],10,Kt)}),128))])])):I("",!0)])):I("",!0),v.value==="tools"?(d(),r("div",tl,[t("div",ll,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[7]||(e[7]=l=>Y("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[8]||(e[8]=l=>Y("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[9]||(e[9]=l=>Y("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:Ie}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:Me}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ue}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Pe(),onClick:ie}," üéØ Enable Click-to-Paste ",8,nl),K.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:fe}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:Q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Oe}," üîÑ Mirror Selection ",8,ol),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ae}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,sl),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Ve}," ‚Ü™Ô∏è Redo ")])])):I("",!0),v.value==="export"?(d(),r("div",il,[t("div",{class:"save-load-buttons"},[t("button",{class:"export-btn success",onClick:Ne}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Te}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",al,[t("button",{class:"export-btn primary",onClick:e[10]||(e[10]=l=>re("update-grid",ae()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:ze}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Ee}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:De}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])):I("",!0)])])):I("",!0),t("div",{class:f(["mobile-dropdown-panel",{open:oe.value}])},[t("div",cl,[t("div",ul,[t("div",rl,[t("label",dl,[e[55]||(e[55]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ŸÅÿß€åŸÑ txt grid",-1)),t("input",{type:"file",accept:".txt",class:"upload-input",onChange:Ke},null,32)]),t("label",vl,[e[56]||(e[56]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ÿ™ÿµŸà€åÿ±",-1)),t("input",{type:"file",accept:"image/*",class:"upload-input",onChange:Ze},null,32)])]),ee.value?(d(),r("div",pl,[t("img",{src:ee.value,alt:"ÿ™ÿµŸà€åÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá",class:"preview-image"},null,8,ml)])):I("",!0)]),t("div",bl,[e[70]||(e[70]=t("div",{class:"controls-header"},[t("h3",{class:"mb-4 text-lg font-bold text-gray-800"}," üé® ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ÿ∑ÿ±ÿßÿ≠€å ")],-1)),t("div",gl,[t("div",fl,[t("div",hl,[e[57]||(e[57]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="dimensions"}]),title:v.value==="dimensions"?"Unpin Section":"Pin Section",onClick:e[11]||(e[11]=l=>F("dimensions"))},S((v.value==="dimensions","üìå")),11,yl)]),t("div",kl,[t("label",Cl,[e[58]||(e[58]=t("span",{class:"dimension-text"},"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>p.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[A,p.value,void 0,{number:!0}]])]),t("label",xl,[e[59]||(e[59]=t("span",{class:"dimension-text"},"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>b.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[A,b.value,void 0,{number:!0}]])]),t("label",_l,[e[60]||(e[60]=t("span",{class:"dimension-text"},"ÿπÿ±ÿ∂ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,y.value,void 0,{number:!0}]])]),t("label",$l,[e[61]||(e[61]=t("span",{class:"dimension-text"},"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,k.value,void 0,{number:!0}]])])])]),t("div",Sl,[t("div",jl,[e[62]||(e[62]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="color"}]),title:v.value==="color"?"Unpin Section":"Pin Section",onClick:e[16]||(e[16]=l=>F("color"))},S((v.value==="color","üìå")),11,wl)]),t("div",Il,[O(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>w.value=l),type:"color",class:"color-picker"},null,512),[[A,w.value]]),t("span",Ml,S(w.value),1)]),t("div",Ul,[e[63]||(e[63]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ± ",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Pl,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:q({backgroundColor:l}),title:l,onClick:o=>w.value=l},[t("button",{class:"remove-color-btn",onClick:ne(o=>$e(l),["stop"])}," √ó ",8,Al)],12,Ol))),128))])]),t("div",Rl,[t("div",Vl,[e[64]||(e[64]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="mode"}]),title:v.value==="mode"?"Unpin Section":"Pin Section",onClick:e[18]||(e[18]=l=>F("mode"))},S((v.value==="mode","üìå")),11,Nl)]),t("div",Tl,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:be}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:ge}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])]),N.value==="image"?(d(),r("div",zl,[t("div",El,[e[65]||(e[65]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ± ŸÖŸáÿ±Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="image"}]),title:v.value==="image"?"Unpin Section":"Pin Section",onClick:e[19]||(e[19]=l=>F("image"))},S((v.value==="image","üìå")),11,Dl)]),t("div",Gl,[t("div",Ll,[(d(!0),r(L,null,W(ve.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,Fl),t("span",Bl,S(l.displayName),1)],10,Wl)}),128))])]),V.value.length>0?(d(),r("div",Xl,[t("div",{class:"recent-images-header"},[e[66]||(e[66]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:we}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",Hl,[(d(!0),r(L,null,W(V.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,Yl),t("button",{class:"remove-image-btn",onClick:ne(i=>je(l),["stop"])}," √ó ",8,ql)],10,Jl)}),128))])])):I("",!0)])):I("",!0),t("div",Ql,[t("div",Kl,[e[67]||(e[67]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="tools"}]),title:v.value==="tools"?"Unpin Section":"Pin Section",onClick:e[20]||(e[20]=l=>F("tools"))},S((v.value==="tools","üìå")),11,Zl)]),t("div",en,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[21]||(e[21]=l=>Y("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[22]||(e[22]=l=>Y("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[23]||(e[23]=l=>Y("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:Ie}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:Me}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ue}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Pe(),onClick:ie}," üéØ Enable Click-to-Paste ",8,tn),K.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:fe}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:Q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Oe}," üîÑ Mirror Selection ",8,ln),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ae}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,nn),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Ve}," ‚Ü™Ô∏è Redo ")]),t("div",on,[e[68]||(e[68]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ",-1)),t("div",sn,[O(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>x.value=l),type:"color",class:"color-picker",title:"ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá"},null,512),[[A,x.value]]),t("button",{class:"tool-btn success",onClick:Qe}," üé® ÿ™ÿ∫€å€åÿ± ÿ™ŸÖÿßŸÖ ŸÖŸáÿ±Ÿá‚ÄåŸáÿß ")])])]),t("div",an,[t("div",cn,[e[69]||(e[69]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üì§ ÿÆÿ±Ÿàÿ¨€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="export"}]),title:v.value==="export"?"Unpin Section":"Pin Section",onClick:e[25]||(e[25]=l=>F("export"))},S((v.value==="export","üìå")),11,un)]),t("div",{class:"save-load-buttons mb-3"},[t("button",{class:"export-btn success",onClick:Ne}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Te}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",rn,[t("button",{class:"export-btn primary",onClick:e[26]||(e[26]=l=>re("update-grid",ae()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:ze}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Ee}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:De}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])])])])],2),t("div",{class:f(["grid-container max-md:min-h-[calc(100vh_-_310px)] md:max-h-[calc(100vh_-_200px)]",{"pinned-active":v.value}])},[de.value?(d(),r("div",dn,[t("div",vn,[t("label",pn,[e[71]||(e[71]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ŸÅÿß€åŸÑ txt grid",-1)),t("input",{type:"file",accept:".txt",class:"upload-input",onChange:Ke},null,32)]),t("label",mn,[e[72]||(e[72]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ÿ™ÿµŸà€åÿ±",-1)),t("input",{type:"file",accept:"image/*",class:"upload-input",onChange:Ze},null,32)])]),ee.value?(d(),r("div",bn,[t("img",{src:ee.value,alt:"ÿ™ÿµŸà€åÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá",class:"preview-image"},null,8,gn)])):I("",!0)])):I("",!0),t("div",fn,[t("div",hn,[t("div",yn,[Fe.value&&$.value==="vertical"?(d(),r("div",kn,[(d(!0),r(L,null,W(Le.value,l=>(d(),r("div",{key:l,class:"flex-shrink-0",style:q({width:y.value+"px"})},[t("div",{class:"flex flex-col",style:q(mt(l))},[(d(!0),r(L,null,W(We.value,o=>(d(),r("div",{key:`${o}-${l}`,class:"cell cursor-pointer border-[1px] border-gray-200",style:q(et(o,l)),onMousedown:i=>He(o,l),onMouseenter:i=>Je(o,l)},null,44,Cn))),128))],4)],4))),128))])):Fe.value&&$.value==="horizontal"?(d(),r("div",xn,[(d(!0),r(L,null,W(We.value,l=>(d(),r("div",{key:l,class:"flex flex-shrink-0 items-start",style:q({height:k.value+"px",width:"100%"})},[t("div",{class:"flex items-start",style:q(bt(l))},[(d(!0),r(L,null,W(Le.value,o=>(d(),r("div",{key:`${l}-${o}`,class:"cell flex-shrink-0 cursor-pointer border-[1px] border-gray-200",style:q(et(l,o)),onMousedown:i=>He(l,o),onMouseenter:i=>Je(l,o)},null,44,_n))),128))],4)],4))),128))])):(d(),r("div",$n," Loading grid... "))],512),e[73]||(e[73]=t("p",{class:"mt-2 text-xs text-gray-500"}," ÿ±ÿßÿ≥ÿ™‚Äå⁄©ŸÑ€å⁄© = Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ. ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ™ÿπÿØÿßÿØ ÿ±ÿØ€åŸÅ/ÿ≥ÿ™ŸàŸÜ ÿ±ÿß ÿØÿ± ŸÖÿ™ÿ∫€åÿ±Ÿáÿß ÿ™ÿ∫€å€åÿ± ÿ®ÿØŸá€å. ",-1))])])],2),t("div",Sn,[e[84]||(e[84]=t("div",{class:"controls-header"},[t("h3",{class:"mb-4 text-lg font-bold text-gray-800"},"üé® ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ÿ∑ÿ±ÿßÿ≠€å")],-1)),t("div",jn,[t("div",wn,[t("div",In,[e[74]||(e[74]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="dimensions"}]),title:v.value==="dimensions"?"Unpin Section":"Pin Section",onClick:e[27]||(e[27]=l=>F("dimensions"))},S((v.value==="dimensions","üìå")),11,Mn)]),t("div",Un,[t("label",Pn,[t("span",On,"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß: "+S(p.value),1),O(t("input",{"onUpdate:modelValue":e[28]||(e[28]=l=>p.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[A,p.value,void 0,{number:!0}]])]),t("label",An,[t("span",Rn,"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß: "+S(b.value),1),O(t("input",{"onUpdate:modelValue":e[29]||(e[29]=l=>b.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[A,b.value,void 0,{number:!0}]])]),t("label",Vn,[t("span",Nn,"ÿπÿ±ÿ∂ ÿ≥ŸÑ: "+S(y.value)+"px",1),O(t("input",{"onUpdate:modelValue":e[30]||(e[30]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,y.value,void 0,{number:!0}]])]),t("label",Tn,[t("span",zn,"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ: "+S(k.value)+"px",1),O(t("input",{"onUpdate:modelValue":e[31]||(e[31]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[A,k.value,void 0,{number:!0}]])]),t("div",En,[e[75]||(e[75]=t("span",{class:"dimension-text"},"ÿ¨Ÿáÿ™ ⁄Øÿ±€åÿØ:",-1)),t("div",Dn,[t("button",{class:f(["orientation-toggle-btn",{active:$.value==="vertical"}]),onClick:e[32]||(e[32]=l=>$.value="vertical")}," ‚ÜïÔ∏è ÿπŸÖŸàÿØ€å ",2),t("button",{class:f(["orientation-toggle-btn",{active:$.value==="horizontal"}]),onClick:e[33]||(e[33]=l=>$.value="horizontal")}," ‚ÜîÔ∏è ÿßŸÅŸÇ€å ",2)])])]),t("div",Gn,[t("button",{class:"show-image-section-btn text-blue-500 !mt-2",onClick:e[34]||(e[34]=l=>de.value=!de.value)},S(de.value?"üîç Show Image Section":"üîç Hide Image Section"),1)])]),t("div",Ln,[t("div",Wn,[e[76]||(e[76]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="color"}]),title:v.value==="color"?"Unpin Section":"Pin Section",onClick:e[35]||(e[35]=l=>F("color"))},S((v.value==="color","üìå")),11,Fn)]),t("div",Bn,[O(t("input",{"onUpdate:modelValue":e[36]||(e[36]=l=>w.value=l),type:"color",class:"color-picker",onChange:be},null,544),[[A,w.value]]),t("span",Xn,S(w.value),1)]),t("div",Hn,[e[77]||(e[77]=t("h4",{class:"text-sm font-semibold text-gray-700"},"üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ±",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Jn,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:q({backgroundColor:l}),title:l,onClick:o=>w.value=l},[t("button",{class:"remove-color-btn",onClick:ne(o=>$e(l),["stop"])}," √ó ",8,qn)],12,Yn))),128))])]),t("div",Qn,[t("div",Kn,[e[78]||(e[78]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="mode"}]),title:v.value==="mode"?"Unpin Section":"Pin Section",onClick:e[37]||(e[37]=l=>F("mode"))},S((v.value==="mode","üìå")),11,Zn)]),t("div",eo,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:be}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:ge}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])]),N.value==="image"?(d(),r("div",to,[t("div",lo,[e[79]||(e[79]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ± ŸÖŸáÿ±Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="image"}]),title:v.value==="image"?"Unpin Section":"Pin Section",onClick:e[38]||(e[38]=l=>F("image"))},S((v.value==="image","üìå")),11,no)]),t("div",oo,[t("div",so,[(d(!0),r(L,null,W(ve.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,ao),t("span",co,S(l.displayName),1)],10,io)}),128))])]),V.value.length>0?(d(),r("div",uo,[t("div",{class:"recent-images-header"},[e[80]||(e[80]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:we}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",ro,[(d(!0),r(L,null,W(V.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:i=>te(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,po),t("button",{class:"remove-image-btn",onClick:ne(i=>je(l),["stop"])}," √ó ",8,mo)],10,vo)}),128))])])):I("",!0)])):I("",!0),t("div",bo,[t("div",go,[e[81]||(e[81]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="tools"}]),title:v.value==="tools"?"Unpin Section":"Pin Section",onClick:e[39]||(e[39]=l=>F("tools"))},S((v.value==="tools","üìå")),11,fo)]),t("div",ho,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[40]||(e[40]=l=>Y("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[41]||(e[41]=l=>Y("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[42]||(e[42]=l=>Y("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:Ie}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:Me}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ue}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Pe(),onClick:ie}," üéØ Enable Click-to-Paste ",8,yo),K.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:fe}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:Q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Oe}," üîÑ Mirror Selection ",8,ko),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ae}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,Co),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Ve}," ‚Ü™Ô∏è Redo ")]),t("div",xo,[e[82]||(e[82]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ",-1)),t("div",_o,[O(t("input",{"onUpdate:modelValue":e[43]||(e[43]=l=>x.value=l),type:"color",class:"color-picker",title:"ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá"},null,512),[[A,x.value]]),t("button",{class:"tool-btn success",onClick:Qe}," üé® ÿ™ÿ∫€å€åÿ± ÿ™ŸÖÿßŸÖ ŸÖŸáÿ±Ÿá‚ÄåŸáÿß ")])])]),t("div",$o,[t("div",So,[e[83]||(e[83]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"üì§ ÿÆÿ±Ÿàÿ¨€å",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="export"}]),title:v.value==="export"?"Unpin Section":"Pin Section",onClick:e[44]||(e[44]=l=>F("export"))},S((v.value==="export","üìå")),11,jo)]),t("div",{class:"save-load-buttons mb-3"},[t("button",{class:"export-btn success",onClick:Ne}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Te}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",wo,[t("button",{class:"export-btn primary",onClick:e[45]||(e[45]=l=>re("update-grid",ae()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:ze}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Ee}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:De}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])])])]))}},Uo=gt(Io,[["__scopeId","data-v-3e05c279"]]);export{Uo as G};
