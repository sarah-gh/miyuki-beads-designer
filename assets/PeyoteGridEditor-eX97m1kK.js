import{_ as pt,r as x,G as ae,m as mt,w as bt,n as gt,U as ft,c as r,a as t,b as I,x as f,t as S,q as O,v as R,F as L,u as W,V as Ze,o as d,z as Y,A as te}from"./index-DHJVjyA5.js";const ht={class:"peyote-editor-container overflow-auto"},yt={class:"mobile-control-bar"},kt={key:0,class:"pinned-section"},Ct={class:"pinned-section-header"},xt={class:"pinned-section-title"},_t={class:"pinned-section-content"},$t={key:0,class:"pinned-dimensions"},St={class:"dimension-inputs"},wt={class:"dimension-label"},jt={class:"dimension-label"},It={class:"dimension-label"},Mt={class:"dimension-label"},Ut={class:"dimension-label"},Pt={class:"orientation-toggle-group"},Ot={key:1,class:"pinned-color"},Rt={class:"color-picker-container"},Vt={class:"color-value"},At={class:"recent-colors-header"},Nt={class:"recent-colors-grid"},Tt=["title","onClick"],zt=["onClick"],Et={key:2,class:"pinned-mode"},Dt={class:"mode-toggle"},Gt={key:3,class:"pinned-image"},Lt={class:"image-picker-container"},Wt={class:"available-images-grid"},Ft=["onClick"],Bt=["src","alt"],Xt={class:"image-name"},Ht={key:0,class:"recent-images-section"},Jt={class:"recent-images-grid"},Yt=["onClick"],qt=["src","alt"],Qt=["onClick"],Kt={key:4,class:"pinned-tools"},Zt={class:"tools-grid"},el=["disabled"],tl=["disabled"],ll=["disabled"],nl={key:5,class:"pinned-export"},ol={class:"grid grid-cols-2 gap-2"},sl={class:"mobile-panel-content"},il={class:"mobile-image-section"},al={class:"upload-section grid grid-cols-2 gap-2"},cl={class:"upload-label"},ul={class:"upload-label"},rl={key:0,class:"image-preview"},dl=["src"],vl={class:"mobile-controls-content"},pl={class:"controls-content"},ml={class:"dimensions-section"},bl={class:"section-header"},gl=["title"],fl={class:"dimension-inputs"},hl={class:"dimension-label"},yl={class:"dimension-label"},kl={class:"dimension-label"},Cl={class:"dimension-label"},xl={class:"color-section"},_l={class:"section-header"},$l=["title"],Sl={class:"color-picker-container"},wl={class:"color-value"},jl={class:"recent-colors-header mt-3!"},Il={class:"recent-colors-grid"},Ml=["title","onClick"],Ul=["onClick"],Pl={class:"mode-section"},Ol={class:"section-header"},Rl=["title"],Vl={class:"mode-toggle"},Al={key:0,class:"mode-section"},Nl={class:"section-header"},Tl=["title"],zl={class:"image-picker-container"},El={class:"available-images-grid"},Dl=["onClick"],Gl=["src","alt"],Ll={class:"image-name"},Wl={key:0,class:"recent-images-section"},Fl={class:"recent-images-grid"},Bl=["onClick"],Xl=["src","alt"],Hl=["onClick"],Jl={class:"tools-section"},Yl={class:"section-header"},ql=["title"],Ql={class:"tools-grid"},Kl=["disabled"],Zl=["disabled"],en=["disabled"],tn={class:"background-color-section !mt-4"},ln={class:"background-color-controls"},nn={class:"export-section"},on={class:"section-header"},sn=["title"],an={class:"grid grid-cols-2 gap-2"},cn={key:0,class:"image-section"},un={class:"upload-section grid grid-cols-2 gap-2"},rn={class:"upload-label"},dn={class:"upload-label"},vn={key:0,class:"image-preview"},pn=["src"],mn={class:"main-content"},bn={class:"p-4"},gn={ref:"gridWrapper",class:"h-[80vh] overflow-auto rounded border bg-white p-2"},fn={key:0,class:"flex items-start",style:{gap:"0px"}},hn=["onMousedown","onMouseenter"],yn={key:1,class:"flex flex-col items-start",style:{gap:"0px"}},kn=["onMousedown","onMouseenter"],Cn={key:2,class:"flex h-full items-center justify-center text-gray-500"},xn={class:"controls-panel"},_n={class:"controls-content"},$n={class:"dimensions-section"},Sn={class:"section-header"},wn=["title"],jn={class:"dimension-inputs"},In={class:"dimension-label"},Mn={class:"dimension-text"},Un={class:"dimension-label"},Pn={class:"dimension-text"},On={class:"dimension-label"},Rn={class:"dimension-text"},Vn={class:"dimension-label"},An={class:"dimension-text"},Nn={class:"dimension-label"},Tn={class:"orientation-toggle-group"},zn={class:"section-header"},En={class:"color-section"},Dn={class:"section-header"},Gn=["title"],Ln={class:"color-picker-container"},Wn={class:"color-value"},Fn={class:"recent-colors-header mt-3!"},Bn={class:"recent-colors-grid"},Xn=["title","onClick"],Hn=["onClick"],Jn={class:"mode-section"},Yn={class:"section-header"},qn=["title"],Qn={class:"mode-toggle"},Kn={key:0,class:"image-section"},Zn={class:"section-header"},eo=["title"],to={class:"image-picker-container"},lo={class:"available-images-grid"},no=["onClick"],oo=["src","alt"],so={class:"image-name"},io={key:0,class:"recent-images-section"},ao={class:"recent-images-grid"},co=["onClick"],uo=["src","alt"],ro=["onClick"],vo={class:"tools-section"},po={class:"section-header"},mo=["title"],bo={class:"tools-grid"},go=["disabled"],fo=["disabled"],ho=["disabled"],yo={class:"background-color-section !mt-4"},ko={class:"background-color-controls"},Co={class:"export-section"},xo={class:"section-header"},_o=["title"],$o={class:"grid grid-cols-2 gap-2"},So={__name:"PeyoteGridEditor",emits:["update-grid"],setup(wo,{emit:et}){const fe=et,K=x(null),A=x([]),N=x("color"),ce=x(!0),ue=x([]),P=x(null),le=x(!1),v=x(null);function tt(){le.value=!le.value}function F(n){v.value===n?v.value=null:(v.value=n,le.value=!1)}function lt(){v.value=null}function nt(n){return{dimensions:"üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá",color:"üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø",mode:"üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å",image:"üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ±",tools:"üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",export:"üì§ ÿÆÿ±Ÿàÿ¨€å"}[n]||n}const b=x(12),m=x(50),y=x(15),k=x(17),$=x("vertical"),he=[{key:"DB-1510",hex:"#efe9df"},{key:"DB-1503",hex:"#efbfc7"},{key:"DB-0914",hex:"#d92e5b"},{key:"DB-1832",hex:"#d39c2a"}],j=x(he[2].hex),_=x("#ffffff"),Ee=ae(()=>Array.from({length:b.value},(n,e)=>e)),De=ae(()=>Array.from({length:m.value},(n,e)=>e)),s=mt([]);function ot(){const n=Array.from({length:m.value},()=>Array.from({length:b.value},()=>_.value));s.splice(0,s.length,...n),ne.value=!0,console.info("Grid initialized:",{rows:m.value,cols:b.value,gridLength:s.length}),D.value=[JSON.parse(JSON.stringify(s))],G.value=0}ae(()=>$.value==="horizontal"?b.value*k.value+k.value:m.value*k.value+k.value),ae(()=>$.value==="horizontal"?m.value*y.value+y.value:b.value*y.value+y.value);const Ge=ae(()=>{var e,l;const n=ne.value&&s.length===m.value&&s.length>0&&((e=s[0])==null?void 0:e.length)===b.value;return console.info("Grid ready check:",{gridInitialized:ne.value,gridLength:s.length,rows:m.value,cols:b.value,firstRowLength:(l=s[0])==null?void 0:l.length,ready:n}),n}),B=x("paint"),M=x([]),T=x(null),Q=x(!1),z=x([]),ye=x(!1),st=x(!1),re=x(null),ne=x(!1),D=x([]),G=x(-1),oe=x(!1),ke=x(!1);function Le(){if(oe.value)return;const n=JSON.parse(JSON.stringify(s));G.value<D.value.length-1&&(D.value=D.value.slice(0,G.value+1)),D.value.push(n),G.value=D.value.length-1,D.value.length>10&&(D.value.shift(),G.value--),console.info("Saved to history:",{historyLength:D.value.length,historyIndex:G.value})}function X(){ke.value=!0}function H(){ke.value&&(Le(),ke.value=!1)}bt([m,b],([n,e],[l,o])=>{if(!ne.value){console.info("Grid not initialized yet, skipping resize");return}const c=Math.max(1,Math.min(200,n||1)),i=Math.max(1,Math.min(200,e||1));c!==n&&(m.value=c),i!==e&&(b.value=i),(c!==l||i!==o)&&(console.info("Dimensions changed:",{oldRows:l,oldCols:o,newRows:c,newCols:i}),We(c,i))});function We(n,e){var i;const l=m.value,o=b.value;console.info("Resizing grid:",{oldRows:l,oldCols:o,newRows:n,newCols:e}),X();const c=Array.from({length:n},()=>Array.from({length:e},()=>_.value));if(s.length>0&&s[0]!==void 0)for(let a=0;a<Math.min(l,n);a++)for(let u=0;u<Math.min(o,e);u++)s[a]&&s[a][u]!==void 0&&(c[a][u]=s[a][u]);s.splice(0,s.length,...c),ne.value=!0,console.info("Grid resized successfully. New grid dimensions:",{rows:n,cols:e,actualGridLength:s.length,actualFirstRowLength:(i=s[0])==null?void 0:i.length}),H()}function Ce(n){if(n===_.value)return;const e=z.value.indexOf(n);e>-1&&z.value.splice(e,1),z.value.unshift(n),z.value.length>20&&(z.value=z.value.slice(0,20))}function xe(n){const e=z.value.indexOf(n);e>-1&&z.value.splice(e,1)}function _e(){z.value=[]}function de(n){const e=A.value.findIndex(l=>l.url===n.url);e>-1&&A.value.splice(e,1),A.value.unshift(n),A.value.length>10&&(A.value=A.value.slice(0,10))}function $e(n){const e=A.value.findIndex(l=>l.url===n.url);e>-1&&A.value.splice(e,1)}function Se(){A.value=[]}function ve(){N.value="color"}function pe(){N.value="image"}function it(){const n=["310.jpg","1130.jpg","1135.jpg","2116.jpg","2131.jpg","2132.jpg","725.jpg","877.jpg","f111.jpg","f222.jpg","f333.jpg","f444.jpg","f555.jpg","f666.jpg","f777.jpg","f888.jpg","f999.jpg","f1010.jpg","f1111.jpg","f1212.jpg","f1313.jpg","f1414.jpg","f1515.jpg","Awhite.jpg","db0042.jpg","db0221.jpg","db0231.jpg","db0268.jpg","db0623.jpg","db0627.jpg","db0635.jpg","db0651.jpg","db0721.jpg","db0722.jpg","db0723.jpg","db0725.jpg","db0726.jpg","db0729.jpg","db0759.jpg","db0763.jpg","db0791.jpg","db0796.jpg","db0877.jpg","db1132.jpg","db1133.jpg","db1135.jpg","db1153.jpg","db1262.jpg","db1570.jpg","db2111.jpg","db2127.jpg","db2131.jpg","db2132.jpg","db2144.jpg","db2316.jpg","db2352.jpg","db2357.jpg","db310.jpg","db626.jpg","db732.jpg","db856.jpg"];ue.value=n.map(e=>({name:e,url:`/miyuki-beads-designer/beads/${e}`,displayName:e.replace(".jpg","")}))}function Z(n){P.value=n,de(n),pe()}function J(n){B.value=n,q(),me()}function Fe(n,e){if(Q.value){rt(n,e);return}switch(ye.value=!0,re.value=`${n},${e}`,B.value){case"paint":X(),at(n,e);break;case"fill":X(),ut(n,e),H();break;case"select":He(n,e);break}}function Be(n,e){if(!ye.value)return;const l=`${n},${e}`;if(l!==re.value)switch(re.value=l,B.value){case"paint":ct(n,e);break;case"select":He(n,e);break}}function Xe(){H(),ye.value=!1,st.value=!1,re.value=null}function at(n,e){if(s[n]&&s[n][e]!==void 0){const l=s[n][e],o=N.value==="image"&&P.value?P.value.url:j.value;l!==o&&(s[n][e]=o,o===j.value?Ce(j.value):N.value==="image"&&P.value&&o===P.value.url&&de(P.value))}}function ct(n,e){if(s[n]&&s[n][e]!==void 0){const l=N.value==="image"&&P.value?P.value.url:j.value;s[n][e]=l,l===j.value?Ce(j.value):N.value==="image"&&P.value&&de(P.value)}}function ut(n,e){if(!s[n]||s[n][e]===void 0)return;const l=s[n][e],o=N.value==="image"&&P.value?P.value.url:j.value;if(l===o)return;const c=new Set,i=[[n,e]];for(;i.length>0;){const[a,u]=i.pop(),h=`${a},${u}`;c.has(h)||a<0||a>=m.value||u<0||u>=b.value||!s[a]||s[a][u]!==l||(c.add(h),s[a][u]=o,i.push([a+1,u],[a-1,u],[a,u+1],[a,u-1]))}o===j.value?Ce(o):o===K.value&&de(o)}function He(n,e){const l=`${n},${e}`,o=M.value.indexOf(l);o>-1?M.value.splice(o,1):M.value.push(l)}function q(){M.value=[]}function we(){if(M.value.length===0){console.warn("No cells selected for copying");return}const n=M.value.map(e=>{var c;const[l,o]=e.split(",").map(Number);return{r:l,c:o,color:((c=s[l])==null?void 0:c[o])||_.value}});T.value=n,console.info(`Copied ${n.length} cells to clipboard`),q(),se()}function je(){if(M.value.length===0){console.warn("No cells selected for cutting");return}X();const n=M.value.map(e=>{var c;const[l,o]=e.split(",").map(Number);return{r:l,c:o,color:((c=s[l])==null?void 0:c[o])||_.value}});T.value=n,console.info(`Cut ${n.length} cells to clipboard`),M.value.forEach(e=>{const[l,o]=e.split(",").map(Number);s[l]&&s[l][o]!==void 0&&(s[l][o]=_.value)}),q(),se(),H()}function Ie(){if(!T.value){console.warn("No content in clipboard to paste");return}X(),q();const n=Math.min(...T.value.map(p=>p.r)),e=Math.min(...T.value.map(p=>p.c)),l=Math.max(...T.value.map(p=>p.r)),o=Math.max(...T.value.map(p=>p.c)),c=(n+l)/2,i=(e+o)/2,a=Math.floor(m.value/2),u=Math.floor(b.value/2),h=a-c,C=u-i;let g=0;T.value.forEach(({r:p,c:E,color:U})=>{const w=E+C;let V=0;const ee=e%2===1,Ke=w%2===1;ee&&!Ke?(V=-1,console.info(`Odd‚ÜíEven: sourceCol=${e}, targetCol=${w}, cellAdjustment=${V}`)):!ee&&Ke?(V=-1,console.info(`Even‚ÜíOdd: sourceCol=${e}, targetCol=${w}, cellAdjustment=${V}`)):console.info(`Same type: sourceCol=${e}, targetCol=${w}, cellAdjustment=${V}`);const ie=p+h+V,ge=w;ie>=0&&ie<m.value&&ge>=0&&ge<b.value&&s[ie]&&s[ie][ge]!==void 0&&(s[ie][ge]=U,g++)}),console.info(`Pasted ${g} cells at center with peyote adjustment`),H()}function rt(n,e){if(!T.value)return;X(),q();const l=Math.min(...T.value.map(i=>i.r)),o=Math.min(...T.value.map(i=>i.c));console.info("minC",o,"c",e);let c=0;T.value.forEach(({r:i,c:a,color:u})=>{const h=i-l,C=a-o,g=e+C;let p=0;const E=o%2===1,U=g%2===1;console.info("sourceIsOdd",E,"targetIsOdd",U),E&&!U?(a%2===1?p=0:p=-1,console.info(`Odd‚ÜíEven: sourceCol=${o}, targetCol=${g}, cellAdjustment=${p}`)):!E&&U?(console.info(`Even‚ÜíOdd: sourceCol=${o}, targetCol=${g}, cellAdjustment=${p}`),a%2===1?p=-1:p=-2):(console.info(`Same type: sourceCol=${o}, targetCol=${g}, cellAdjustment=${p}`),p=-1),console.info("cellAdjustment",p);const w=n+h+p,V=g;console.info(`Pasting cell: orig(${i},${a}) -> new(${w},${V}) offset(${h},${C}) cellAdjustment=${p}`),w>=0&&w<m.value&&V>=0&&V<b.value&&s[w]&&s[w][V]!==void 0&&(s[w][V]=u,c++)}),console.info(`Pasted ${c} cells at position (${n}, ${e}) with per-cell peyote adjustment`),H()}function se(){T.value&&(Q.value=!0)}function me(){Q.value=!1}function Me(){return T.value&&T.value.length>0}function Ue(){if(M.value.length===0)return;X();const n=M.value.map(l=>{var i;const[o,c]=l.split(",").map(Number);return{r:o,c,color:((i=s[o])==null?void 0:i[c])||_.value}}),e=Math.max(...n.map(l=>l.c));n.forEach(({r:l,c:o,color:c})=>{const i=e-o;i>=0&&i<b.value&&s[l]&&s[l][i]!==void 0&&(s[l][i]=c)}),H()}function Pe(){if(M.value.length===0)return;X();const n=M.value.map(l=>{var i;const[o,c]=l.split(",").map(Number);return{r:o,c,color:((i=s[o])==null?void 0:i[c])||_.value}}),e=Math.max(...n.map(l=>l.r));n.forEach(({r:l,c:o,color:c})=>{const i=e-l;i>=0&&i<m.value&&s[i]&&s[i][o]!==void 0&&(s[i][o]=c)}),H()}function Oe(){if(G.value>0){oe.value=!0,G.value--;const n=D.value[G.value];s.splice(0,s.length,...n),oe.value=!1,console.info("Undo performed:",{historyIndex:G.value,historyLength:D.value.length})}else console.warn("No more undo history available")}function Re(){if(G.value<D.value.length-1){oe.value=!0,G.value++;const n=D.value[G.value];s.splice(0,s.length,...n),oe.value=!1,console.info("Redo performed:",{historyIndex:G.value,historyLength:D.value.length})}else console.warn("No more redo history available")}function Je(){X();for(let n=0;n<m.value;n++)for(let e=0;e<b.value;e++)s[n]&&s[n][e]!==void 0&&(s[n][e]=_.value);H()}function be(){return s.map(n=>[...n])}function Ve(){const n={grid:be(),cols:b.value,rows:m.value,cellWidth:y.value,cellHeight:k.value,selectedColor:j.value,backgroundColor:_.value,orientation:$.value};localStorage.setItem("peyoteGrid",JSON.stringify(n))}function Ae(){const n=localStorage.getItem("peyoteGrid");if(n){const e=JSON.parse(n);if(b.value=e.cols||12,m.value=e.rows||36,y.value=e.cellWidth||15,k.value=e.cellHeight||15,j.value=e.selectedColor||he[2].hex,_.value=e.backgroundColor||"#ffffff",e.orientation&&(e.orientation==="vertical"||e.orientation==="horizontal")&&($.value=e.orientation),e.grid){We(m.value,b.value);for(let l=0;l<m.value;l++)for(let o=0;o<b.value;o++)s[l][o]=e.grid[l]&&e.grid[l][o]?e.grid[l][o]:null}}}async function Ne(){const n=document.createElement("canvas"),e=n.getContext("2d");$.value==="horizontal"?(n.width=b.value*y.value+y.value/2,n.height=m.value*k.value):(n.width=b.value*y.value,n.height=m.value*k.value+k.value/2),e.fillStyle=_.value,e.fillRect(0,0,n.width,n.height);const l=[];for(let i=0;i<m.value;i++)for(let a=0;a<b.value;a++){const u=s[i][a]||_.value;if(u&&(u.startsWith("data:image/")||u.startsWith("/miyuki-beads-designer/beads/"))){const h=new Promise(C=>{const g=new Image;g.onload=()=>C({img:g,r:i,c:a}),g.onerror=()=>C({img:null,r:i,c:a}),g.src=u});l.push(h)}}const o=await Promise.all(l);for(let i=0;i<m.value;i++)for(let a=0;a<b.value;a++){const u=s[i][a]||_.value;let h,C;if($.value==="horizontal"){const g=i%2===1?y.value/2:0;h=a*y.value+g,C=i*k.value}else{const g=a%2===1?k.value/2:0;h=a*y.value,C=i*k.value+g}if(u&&(u.startsWith("data:image/")||u.startsWith("/miyuki-beads-designer/beads/"))){const g=o.find(p=>p.r===i&&p.c===a);g&&g.img&&e.drawImage(g.img,h,C,y.value,k.value)}else e.fillStyle=u,e.fillRect(h,C,y.value,k.value)}const c=document.createElement("a");c.download=`peyote-grid-${$.value}.png`,c.href=n.toDataURL(),c.click()}async function Te(){const e=document.createElement("canvas"),l=e.getContext("2d");$.value==="horizontal"?(e.width=(b.value*y.value+y.value/2)*4,e.height=m.value*k.value*4):(e.width=b.value*y.value*4,e.height=(m.value*k.value+k.value/2)*4),l.fillStyle=_.value,l.fillRect(0,0,e.width,e.height);const o=[];for(let a=0;a<m.value;a++)for(let u=0;u<b.value;u++){const h=s[a][u]||_.value;if(h&&(h.startsWith("data:image/")||h.startsWith("/miyuki-beads-designer/beads/"))){const C=new Promise(g=>{const p=new Image;p.onload=()=>g({img:p,r:a,c:u}),p.onerror=()=>g({img:null,r:a,c:u}),p.src=h});o.push(C)}}const c=await Promise.all(o);for(let a=0;a<m.value;a++)for(let u=0;u<b.value;u++){const h=s[a][u]||_.value;let C,g;if($.value==="horizontal"){const U=a%2===1?y.value/2:0;C=(u*y.value+U)*4,g=a*k.value*4}else{const U=u%2===1?k.value/2:0;C=u*y.value*4,g=(a*k.value+U)*4}const p=y.value*4,E=k.value*4;if(h&&(h.startsWith("data:image/")||h.startsWith("/miyuki-beads-designer/beads/"))){const U=c.find(w=>w.r===a&&w.c===u);U&&U.img&&l.drawImage(U.img,C,g,p,E)}else l.fillStyle=h,l.fillRect(C,g,p,E)}const i=document.createElement("a");i.download=`peyote-grid-hd-${$.value}.png`,i.href=e.toDataURL(),i.click()}function ze(){try{const n=[];for(let a=0;a<m.value;a++)for(let u=0;u<b.value;u++){const h=s[a][u]||_.value;n.push(h)}const e={grid:n,rows:m.value,cols:b.value,orientation:$.value,type:"peyote",timestamp:new Date().toISOString()},l=JSON.stringify(e,null,2),o=new Blob([l],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(o),i=document.createElement("a");i.href=c,i.download=`peyote_grid_${m.value}x${b.value}_${$.value}_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,i.click(),URL.revokeObjectURL(c)}catch(n){console.error("Error exporting TXT file:",n)}}function Ye(n){const e=n.target.files[0];if(!e)return;const l=new FileReader;l.onload=o=>{try{const c=o.target.result.trim();console.info("TXT file content:",c);const i=c.split(`
`);if(c.startsWith("{")){const a=JSON.parse(c);if(a.grid&&a.rows&&a.cols){const{grid:u,rows:h,cols:C,orientation:g}=a;if(console.info("Parsed colors:",u.slice(0,10),"...","Length:",u.length),console.info("Expected length:",h*C,"Rows:",h,"Cols:",C),console.info("Orientation:",g||"vertical (default)"),g&&(g==="vertical"||g==="horizontal")&&($.value=g,console.info("Grid orientation set to:",g)),Array.isArray(u)&&u.every(p=>p===null||p===_.value||typeof p=="string"&&(p.match(/^#[0-9A-Fa-f]{6}$/)||p.startsWith("data:image/")||p.startsWith("/miyuki-beads-designer/beads/"))))if(console.info("Color validation passed"),u.length===h*C){console.info("Length validation passed, updating grid..."),b.value=C,m.value=h,Ze(()=>{const p=[];for(let E=0;E<h;E++){const U=[];for(let w=0;w<C;w++){const V=E*C+w,ee=u[V];U.push(ee??_.value)}p.push(U)}s.splice(0,s.length,...p),console.info("Grid loaded from TXT:",{rows:h,cols:C,orientation:$.value,gridData:p})});return}else console.error("Length mismatch:",u.length,"expected",h*C);else console.error("Color validation failed")}else console.error("Missing required fields in JSON")}if(i.length>2&&i[0].includes("Peyote Grid")){const a=i[0].match(/(\d+)x(\d+)/);if(a){const u=parseInt(a[1]),h=parseInt(a[2]);b.value=u,m.value=h,Ze(()=>{const C=[];for(let g=2;g<i.length&&g-2<h;g++){const p=[],E=i[g];for(let U=0;U<u;U++){const w=U*2;if(w+1<E.length){const V=E.substring(w,w+2);p.push(V==="‚ñà‚ñà"?"#FF0000":_.value)}else p.push(_.value)}C.push(p)}s.splice(0,s.length,...C)});return}}console.error("Unsupported TXT format")}catch(c){console.error("Error parsing TXT file:",c)}},l.readAsText(e)}function qe(n){const e=n.target.files[0];if(!e)return;const l=new FileReader;l.onload=o=>{const c=o.target.result;K.value=c},l.readAsDataURL(e)}function dt(n){return{transform:`translateY(${n%2===1?k.value/2:0}px)`,gap:"0px"}}function vt(n){return{transform:`translateX(${n%2===1?y.value/2:0}px)`,gap:"0px"}}function Qe(n,e){var u;const l=((u=s[n])==null?void 0:u[e])||_.value,o=M.value.includes(`${n},${e}`),c=Q.value,i=l&&(l.startsWith("data:image/")||l.startsWith("/miyuki-beads-designer/beads/")),a={width:`${y.value}px`,height:`${k.value}px`,boxSizing:"border-box",border:o?"2px solid #3b82f6":c?"1px solid #f59e0b":"1px solid #e5e7eb",cursor:c?"crosshair":"pointer",opacity:c?.9:1};return i?{...a,backgroundColor:"transparent",backgroundImage:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{...a,background:l}}return gt(()=>{console.info("Component mounted. Initial dimensions:",{rows:m.value,cols:b.value}),ot(),it();for(let n=0;n<b.value;n++){const e=Math.floor(m.value/2+Math.sin(n/1.5)*(m.value/6));e>=0&&e<m.value&&(s[e][n]=he[2].hex)}Le(),document.addEventListener("mouseup",Xe)}),ft(()=>{document.removeEventListener("mouseup",Xe)}),(n,e)=>(d(),r("div",ht,[t("div",yt,[t("button",{class:f(["mobile-menu-btn",{active:le.value}]),onClick:tt},e[46]||(e[46]=[t("span",{class:"menu-icon"},"‚ò∞",-1),t("span",{class:"menu-text"},"ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",-1)]),2),e[47]||(e[47]=t("div",{class:"mobile-title"},"üé® Ÿà€åÿ±ÿß€åÿ¥⁄Øÿ± Peyote",-1))]),v.value?(d(),r("div",kt,[t("div",Ct,[t("h4",xt,S(nt(v.value)),1),t("button",{class:"unpin-btn",title:"Unpin Section",onClick:lt}," ‚úï ")]),t("div",_t,[v.value==="dimensions"?(d(),r("div",$t,[t("div",St,[t("label",wt,[e[48]||(e[48]=t("span",{class:"dimension-text"},"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[R,m.value,void 0,{number:!0}]])]),t("label",jt,[e[49]||(e[49]=t("span",{class:"dimension-text"},"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[R,b.value,void 0,{number:!0}]])]),t("label",It,[e[50]||(e[50]=t("span",{class:"dimension-text"},"ÿπÿ±ÿ∂ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,y.value,void 0,{number:!0}]])]),t("label",Mt,[e[51]||(e[51]=t("span",{class:"dimension-text"},"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,k.value,void 0,{number:!0}]])]),t("div",Ut,[e[52]||(e[52]=t("span",{class:"dimension-text"},"ÿ¨Ÿáÿ™ ⁄Øÿ±€åÿØ:",-1)),t("div",Pt,[t("button",{class:f(["orientation-toggle-btn",{active:$.value==="vertical"}]),onClick:e[4]||(e[4]=l=>$.value="vertical")}," ‚ÜïÔ∏è ÿπŸÖŸàÿØ€å ",2),t("button",{class:f(["orientation-toggle-btn",{active:$.value==="horizontal"}]),onClick:e[5]||(e[5]=l=>$.value="horizontal")}," ‚ÜîÔ∏è ÿßŸÅŸÇ€å ",2)])])])])):I("",!0),v.value==="color"?(d(),r("div",Ot,[t("div",Rt,[O(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>j.value=l),type:"color",class:"color-picker"},null,512),[[R,j.value]]),t("span",Vt,S(j.value),1)]),t("div",At,[e[53]||(e[53]=t("h4",{class:"text-sm font-semibold text-gray-700"},"üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ±",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:_e}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Nt,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:Y({backgroundColor:l}),title:l,onClick:o=>j.value=l},[t("button",{class:"remove-color-btn",onClick:te(o=>xe(l),["stop"])}," √ó ",8,zt)],12,Tt))),128))])])):I("",!0),v.value==="mode"?(d(),r("div",Et,[t("div",Dt,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:ve}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:pe}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])])):I("",!0),v.value==="image"?(d(),r("div",Gt,[t("div",Lt,[t("div",Wt,[(d(!0),r(L,null,W(ue.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,Bt),t("span",Xt,S(l.displayName),1)],10,Ft)}),128))])]),A.value.length>0?(d(),r("div",Ht,[t("div",{class:"recent-images-header"},[e[54]||(e[54]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",Jt,[(d(!0),r(L,null,W(A.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,qt),t("button",{class:"remove-image-btn",onClick:te(c=>$e(l),["stop"])}," √ó ",8,Qt)],10,Yt)}),128))])])):I("",!0)])):I("",!0),v.value==="tools"?(d(),r("div",Kt,[t("div",Zt,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[7]||(e[7]=l=>J("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[8]||(e[8]=l=>J("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[9]||(e[9]=l=>J("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:we}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:je}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ie}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Me(),onClick:se}," üéØ Enable Click-to-Paste ",8,el),Q.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:me}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ue}," üîÑ Mirror Selection ",8,tl),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Pe}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,ll),t("button",{class:"tool-btn secondary",onClick:Oe}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü™Ô∏è Redo ")])])):I("",!0),v.value==="export"?(d(),r("div",nl,[t("div",{class:"save-load-buttons"},[t("button",{class:"export-btn success",onClick:Ve}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Ae}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",ol,[t("button",{class:"export-btn primary",onClick:e[10]||(e[10]=l=>fe("update-grid",be()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:Ne}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Te}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:ze}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])):I("",!0)])])):I("",!0),t("div",{class:f(["mobile-dropdown-panel",{open:le.value}])},[t("div",sl,[t("div",il,[t("div",al,[t("label",cl,[e[55]||(e[55]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ŸÅÿß€åŸÑ txt grid",-1)),t("input",{type:"file",accept:".txt",class:"upload-input",onChange:Ye},null,32)]),t("label",ul,[e[56]||(e[56]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ÿ™ÿµŸà€åÿ±",-1)),t("input",{type:"file",accept:"image/*",class:"upload-input",onChange:qe},null,32)])]),K.value?(d(),r("div",rl,[t("img",{src:K.value,alt:"ÿ™ÿµŸà€åÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá",class:"preview-image"},null,8,dl)])):I("",!0)]),t("div",vl,[e[70]||(e[70]=t("div",{class:"controls-header"},[t("h3",{class:"mb-4 text-lg font-bold text-gray-800"}," üé® ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ÿ∑ÿ±ÿßÿ≠€å ")],-1)),t("div",pl,[t("div",ml,[t("div",bl,[e[57]||(e[57]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="dimensions"}]),title:v.value==="dimensions"?"Unpin Section":"Pin Section",onClick:e[11]||(e[11]=l=>F("dimensions"))},S((v.value==="dimensions","üìå")),11,gl)]),t("div",fl,[t("label",hl,[e[58]||(e[58]=t("span",{class:"dimension-text"},"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>m.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[R,m.value,void 0,{number:!0}]])]),t("label",yl,[e[59]||(e[59]=t("span",{class:"dimension-text"},"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß:",-1)),O(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>b.value=l),type:"number",min:"1",class:"dimension-input"},null,512),[[R,b.value,void 0,{number:!0}]])]),t("label",kl,[e[60]||(e[60]=t("span",{class:"dimension-text"},"ÿπÿ±ÿ∂ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,y.value,void 0,{number:!0}]])]),t("label",Cl,[e[61]||(e[61]=t("span",{class:"dimension-text"},"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ:",-1)),O(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,k.value,void 0,{number:!0}]])])])]),t("div",xl,[t("div",_l,[e[62]||(e[62]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="color"}]),title:v.value==="color"?"Unpin Section":"Pin Section",onClick:e[16]||(e[16]=l=>F("color"))},S((v.value==="color","üìå")),11,$l)]),t("div",Sl,[O(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>j.value=l),type:"color",class:"color-picker"},null,512),[[R,j.value]]),t("span",wl,S(j.value),1)]),t("div",jl,[e[63]||(e[63]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ± ",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:_e}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Il,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:Y({backgroundColor:l}),title:l,onClick:o=>j.value=l},[t("button",{class:"remove-color-btn",onClick:te(o=>xe(l),["stop"])}," √ó ",8,Ul)],12,Ml))),128))])]),t("div",Pl,[t("div",Ol,[e[64]||(e[64]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="mode"}]),title:v.value==="mode"?"Unpin Section":"Pin Section",onClick:e[18]||(e[18]=l=>F("mode"))},S((v.value==="mode","üìå")),11,Rl)]),t("div",Vl,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:ve}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:pe}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])]),N.value==="image"?(d(),r("div",Al,[t("div",Nl,[e[65]||(e[65]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ± ŸÖŸáÿ±Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="image"}]),title:v.value==="image"?"Unpin Section":"Pin Section",onClick:e[19]||(e[19]=l=>F("image"))},S((v.value==="image","üìå")),11,Tl)]),t("div",zl,[t("div",El,[(d(!0),r(L,null,W(ue.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,Gl),t("span",Ll,S(l.displayName),1)],10,Dl)}),128))])]),A.value.length>0?(d(),r("div",Wl,[t("div",{class:"recent-images-header"},[e[66]||(e[66]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",Fl,[(d(!0),r(L,null,W(A.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,Xl),t("button",{class:"remove-image-btn",onClick:te(c=>$e(l),["stop"])}," √ó ",8,Hl)],10,Bl)}),128))])])):I("",!0)])):I("",!0),t("div",Jl,[t("div",Yl,[e[67]||(e[67]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="tools"}]),title:v.value==="tools"?"Unpin Section":"Pin Section",onClick:e[20]||(e[20]=l=>F("tools"))},S((v.value==="tools","üìå")),11,ql)]),t("div",Ql,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[21]||(e[21]=l=>J("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[22]||(e[22]=l=>J("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[23]||(e[23]=l=>J("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:we}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:je}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ie}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Me(),onClick:se}," üéØ Enable Click-to-Paste ",8,Kl),Q.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:me}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ue}," üîÑ Mirror Selection ",8,Zl),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Pe}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,en),t("button",{class:"tool-btn secondary",onClick:Oe}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü™Ô∏è Redo ")]),t("div",tn,[e[68]||(e[68]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ",-1)),t("div",ln,[O(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>_.value=l),type:"color",class:"color-picker",title:"ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá"},null,512),[[R,_.value]]),t("button",{class:"tool-btn success",onClick:Je}," üé® ÿ™ÿ∫€å€åÿ± ÿ™ŸÖÿßŸÖ ŸÖŸáÿ±Ÿá‚ÄåŸáÿß ")])])]),t("div",nn,[t("div",on,[e[69]||(e[69]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üì§ ÿÆÿ±Ÿàÿ¨€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="export"}]),title:v.value==="export"?"Unpin Section":"Pin Section",onClick:e[25]||(e[25]=l=>F("export"))},S((v.value==="export","üìå")),11,sn)]),t("div",{class:"save-load-buttons mb-3"},[t("button",{class:"export-btn success",onClick:Ve}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Ae}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",an,[t("button",{class:"export-btn primary",onClick:e[26]||(e[26]=l=>fe("update-grid",be()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:Ne}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Te}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:ze}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])])])])],2),t("div",{class:f(["grid-container max-md:min-h-[calc(100vh_-_310px)] md:max-h-[calc(100vh_-_200px)]",{"pinned-active":v.value}])},[ce.value?(d(),r("div",cn,[t("div",un,[t("label",rn,[e[71]||(e[71]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ŸÅÿß€åŸÑ txt grid",-1)),t("input",{type:"file",accept:".txt",class:"upload-input",onChange:Ye},null,32)]),t("label",dn,[e[72]||(e[72]=t("span",{class:"upload-text"},"üìÅ ÿ¢ŸæŸÑŸàÿØ ÿ™ÿµŸà€åÿ±",-1)),t("input",{type:"file",accept:"image/*",class:"upload-input",onChange:qe},null,32)])]),K.value?(d(),r("div",vn,[t("img",{src:K.value,alt:"ÿ™ÿµŸà€åÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá",class:"preview-image"},null,8,pn)])):I("",!0)])):I("",!0),t("div",mn,[t("div",bn,[t("div",gn,[Ge.value&&$.value==="vertical"?(d(),r("div",fn,[(d(!0),r(L,null,W(Ee.value,l=>(d(),r("div",{key:l,class:"flex-shrink-0",style:Y({width:y.value+"px"})},[t("div",{class:"flex flex-col",style:Y(dt(l))},[(d(!0),r(L,null,W(De.value,o=>(d(),r("div",{key:`${o}-${l}`,class:"cell cursor-pointer border-[1px] border-gray-200",style:Y(Qe(o,l)),onMousedown:c=>Fe(o,l),onMouseenter:c=>Be(o,l)},null,44,hn))),128))],4)],4))),128))])):Ge.value&&$.value==="horizontal"?(d(),r("div",yn,[(d(!0),r(L,null,W(De.value,l=>(d(),r("div",{key:l,class:"flex flex-shrink-0 items-start",style:Y({height:k.value+"px",width:"100%"})},[t("div",{class:"flex items-start",style:Y(vt(l))},[(d(!0),r(L,null,W(Ee.value,o=>(d(),r("div",{key:`${l}-${o}`,class:"cell flex-shrink-0 cursor-pointer border-[1px] border-gray-200",style:Y(Qe(l,o)),onMousedown:c=>Fe(l,o),onMouseenter:c=>Be(l,o)},null,44,kn))),128))],4)],4))),128))])):(d(),r("div",Cn," Loading grid... "))],512),e[73]||(e[73]=t("p",{class:"mt-2 text-xs text-gray-500"}," ÿ±ÿßÿ≥ÿ™‚Äå⁄©ŸÑ€å⁄© = Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ. ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ™ÿπÿØÿßÿØ ÿ±ÿØ€åŸÅ/ÿ≥ÿ™ŸàŸÜ ÿ±ÿß ÿØÿ± ŸÖÿ™ÿ∫€åÿ±Ÿáÿß ÿ™ÿ∫€å€åÿ± ÿ®ÿØŸá€å. ",-1))])])],2),t("div",xn,[e[84]||(e[84]=t("div",{class:"controls-header"},[t("h3",{class:"mb-4 text-lg font-bold text-gray-800"},"üé® ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ÿ∑ÿ±ÿßÿ≠€å")],-1)),t("div",_n,[t("div",$n,[t("div",Sn,[e[74]||(e[74]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üìê ÿßÿ®ÿπÿßÿØ ÿ¥ÿ®⁄©Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="dimensions"}]),title:v.value==="dimensions"?"Unpin Section":"Pin Section",onClick:e[27]||(e[27]=l=>F("dimensions"))},S((v.value==="dimensions","üìå")),11,wn)]),t("div",jn,[t("label",In,[t("span",Mn,"ÿ±ÿØ€åŸÅ‚ÄåŸáÿß: "+S(m.value),1),O(t("input",{"onUpdate:modelValue":e[28]||(e[28]=l=>m.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[R,m.value,void 0,{number:!0}]])]),t("label",Un,[t("span",Pn,"ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß: "+S(b.value),1),O(t("input",{"onUpdate:modelValue":e[29]||(e[29]=l=>b.value=l),type:"number",min:"1",max:"200",class:"dimension-input"},null,512),[[R,b.value,void 0,{number:!0}]])]),t("label",On,[t("span",Rn,"ÿπÿ±ÿ∂ ÿ≥ŸÑ: "+S(y.value)+"px",1),O(t("input",{"onUpdate:modelValue":e[30]||(e[30]=l=>y.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,y.value,void 0,{number:!0}]])]),t("label",Vn,[t("span",An,"ÿßÿ±ÿ™ŸÅÿßÿπ ÿ≥ŸÑ: "+S(k.value)+"px",1),O(t("input",{"onUpdate:modelValue":e[31]||(e[31]=l=>k.value=l),type:"number",min:"5",max:"50",class:"dimension-input"},null,512),[[R,k.value,void 0,{number:!0}]])]),t("div",Nn,[e[75]||(e[75]=t("span",{class:"dimension-text"},"ÿ¨Ÿáÿ™ ⁄Øÿ±€åÿØ:",-1)),t("div",Tn,[t("button",{class:f(["orientation-toggle-btn",{active:$.value==="vertical"}]),onClick:e[32]||(e[32]=l=>$.value="vertical")}," ‚ÜïÔ∏è ÿπŸÖŸàÿØ€å ",2),t("button",{class:f(["orientation-toggle-btn",{active:$.value==="horizontal"}]),onClick:e[33]||(e[33]=l=>$.value="horizontal")}," ‚ÜîÔ∏è ÿßŸÅŸÇ€å ",2)])])]),t("div",zn,[t("button",{class:"show-image-section-btn text-blue-500 !mt-2",onClick:e[34]||(e[34]=l=>ce.value=!ce.value)},S(ce.value?"üîç Show Image Section":"üîç Hide Image Section"),1)])]),t("div",En,[t("div",Dn,[e[76]||(e[76]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="color"}]),title:v.value==="color"?"Unpin Section":"Pin Section",onClick:e[35]||(e[35]=l=>F("color"))},S((v.value==="color","üìå")),11,Gn)]),t("div",Ln,[O(t("input",{"onUpdate:modelValue":e[36]||(e[36]=l=>j.value=l),type:"color",class:"color-picker",onChange:ve},null,544),[[R,j.value]]),t("span",Wn,S(j.value),1)]),t("div",Fn,[e[77]||(e[77]=t("h4",{class:"text-sm font-semibold text-gray-700"},"üîÑ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿÆ€åÿ±",-1)),z.value.length>0?(d(),r("button",{key:0,class:"clear-colors-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ±ŸÜ⁄Ø‚ÄåŸáÿß",onClick:_e}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")):I("",!0)]),t("div",Bn,[(d(!0),r(L,null,W(z.value,l=>(d(),r("div",{key:l,class:"color-swatch",style:Y({backgroundColor:l}),title:l,onClick:o=>j.value=l},[t("button",{class:"remove-color-btn",onClick:te(o=>xe(l),["stop"])}," √ó ",8,Hn)],12,Xn))),128))])]),t("div",Jn,[t("div",Yn,[e[78]||(e[78]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ≠ÿßŸÑÿ™ ÿ∑ÿ±ÿßÿ≠€å ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="mode"}]),title:v.value==="mode"?"Unpin Section":"Pin Section",onClick:e[37]||(e[37]=l=>F("mode"))},S((v.value==="mode","üìå")),11,qn)]),t("div",Qn,[t("button",{class:f(["mode-btn",{active:N.value==="color"}]),onClick:ve}," üé® ÿ±ŸÜ⁄Ø ",2),t("button",{class:f(["mode-btn",{active:N.value==="image"}]),onClick:pe}," üñºÔ∏è ÿ™ÿµŸà€åÿ± ",2)])]),N.value==="image"?(d(),r("div",Kn,[t("div",Zn,[e[79]||(e[79]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üñºÔ∏è ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿµŸà€åÿ± ŸÖŸáÿ±Ÿá ",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="image"}]),title:v.value==="image"?"Unpin Section":"Pin Section",onClick:e[38]||(e[38]=l=>F("image"))},S((v.value==="image","üìå")),11,eo)]),t("div",to,[t("div",lo,[(d(!0),r(L,null,W(ue.value,l=>{var o;return d(),r("div",{key:l.name,class:f(["image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"bead-image"},null,8,oo),t("span",so,S(l.displayName),1)],10,no)}),128))])]),A.value.length>0?(d(),r("div",io,[t("div",{class:"recent-images-header"},[e[80]||(e[80]=t("h4",{class:"text-sm font-semibold text-gray-700"}," üîÑ ÿ™ÿµÿßŸà€åÿ± ÿßÿÆ€åÿ± ",-1)),t("button",{class:"clear-images-btn",title:"Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ŸÖÿßŸÖ ÿ™ÿµÿßŸà€åÿ±",onClick:Se}," üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ")]),t("div",ao,[(d(!0),r(L,null,W(A.value,l=>{var o;return d(),r("div",{key:l.url,class:f(["recent-image-item",{selected:((o=P.value)==null?void 0:o.url)===l.url}]),onClick:c=>Z(l)},[t("img",{src:l.url,alt:l.displayName,class:"recent-bead-image"},null,8,uo),t("button",{class:"remove-image-btn",onClick:te(c=>$e(l),["stop"])}," √ó ",8,ro)],10,co)}),128))])])):I("",!0)])):I("",!0),t("div",vo,[t("div",po,[e[81]||(e[81]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"üõ†Ô∏è ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="tools"}]),title:v.value==="tools"?"Unpin Section":"Pin Section",onClick:e[39]||(e[39]=l=>F("tools"))},S((v.value==="tools","üìå")),11,mo)]),t("div",bo,[t("button",{class:f(["tool-btn primary",{active:B.value==="paint"}]),onClick:e[40]||(e[40]=l=>J("paint"))}," üñåÔ∏è Paint ",2),t("button",{class:f(["tool-btn primary",{active:B.value==="fill"}]),onClick:e[41]||(e[41]=l=>J("fill"))}," ü™£ Fill ",2),t("button",{class:f(["tool-btn secondary",{active:B.value==="select"}]),onClick:e[42]||(e[42]=l=>J("select"))}," üìê Select ",2),t("button",{class:"tool-btn secondary",onClick:we}," üìã Copy "),t("button",{class:"tool-btn secondary",onClick:je}," ‚úÇÔ∏è Cut "),t("button",{class:"tool-btn secondary",onClick:Ie}," üìç Paste at Center "),t("button",{class:"tool-btn secondary",disabled:!Me(),onClick:se}," üéØ Enable Click-to-Paste ",8,go),Q.value?(d(),r("button",{key:0,class:"tool-btn danger",onClick:me}," ‚ùå Cancel Click-to-Paste ")):I("",!0),t("button",{class:"tool-btn secondary",onClick:q}," üóëÔ∏è Clear Selection "),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Ue}," üîÑ Mirror Selection ",8,fo),t("button",{class:"tool-btn secondary",disabled:M.value.length===0,onClick:Pe}," ‚ÜïÔ∏è Mirror Selection Vertical ",8,ho),t("button",{class:"tool-btn secondary",onClick:Oe}," ‚Ü©Ô∏è Undo "),t("button",{class:"tool-btn secondary",onClick:Re}," ‚Ü™Ô∏è Redo ")]),t("div",yo,[e[82]||(e[82]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"}," üé® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ",-1)),t("div",ko,[O(t("input",{"onUpdate:modelValue":e[43]||(e[43]=l=>_.value=l),type:"color",class:"color-picker",title:"ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜ⁄Ø Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá"},null,512),[[R,_.value]]),t("button",{class:"tool-btn success",onClick:Je}," üé® ÿ™ÿ∫€å€åÿ± ÿ™ŸÖÿßŸÖ ŸÖŸáÿ±Ÿá‚ÄåŸáÿß ")])])]),t("div",Co,[t("div",xo,[e[83]||(e[83]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-700"},"üì§ ÿÆÿ±Ÿàÿ¨€å",-1)),t("button",{class:f(["pin-btn",{pinned:v.value==="export"}]),title:v.value==="export"?"Unpin Section":"Pin Section",onClick:e[44]||(e[44]=l=>F("export"))},S((v.value==="export","üìå")),11,_o)]),t("div",{class:"save-load-buttons mb-3"},[t("button",{class:"export-btn success",onClick:Ve}," üíæ ÿ∞ÿÆ€åÿ±Ÿá ⁄Øÿ±€åÿØ "),t("button",{class:"export-btn info",onClick:Ae}," üìÇ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿÆÿ±€åŸÜ ÿ∞ÿÆ€åÿ±Ÿá ")]),t("div",$o,[t("button",{class:"export-btn primary",onClick:e[45]||(e[45]=l=>fe("update-grid",be()))}," üöÄ ÿßÿ±ÿ≥ÿßŸÑ ÿ®Ÿá 3D "),t("button",{class:"export-btn success",onClick:Ne}," üì∑ ÿÆÿ±Ÿàÿ¨€å ÿπ⁄©ÿ≥ "),t("button",{class:"export-btn info",onClick:Te}," üñºÔ∏è ÿÆÿ±Ÿàÿ¨€å HD "),t("button",{class:"export-btn warning",onClick:ze}," üìÑ ÿÆÿ±Ÿàÿ¨€å TXT ")])])])])]))}},Io=pt(So,[["__scopeId","data-v-2305c2a8"]]);export{Io as G};
